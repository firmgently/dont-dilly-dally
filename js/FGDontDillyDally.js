var uk=void 0!==uk?uk:{};uk.co=void 0!==uk.co?uk.co:{},uk.co.firmgently=void 0!==uk.co.firmgently?uk.co.firmgently:{},uk.co.firmgently.FGUtils=function(){"use strict";var e,t,n,o,a,r,l,i,s,c,d,m,E,p,T,u,I;return String.prototype.isEmpty=function(){return!this||/^\s*$/.test(this)},Storage.prototype.setObject=function(e,t){this.setItem(e,JSON.stringify(t))},Storage.prototype.getObject=function(e){var t=this.getItem(e);return t&&JSON.parse(t)},Date.prototype.monthDays=function(){return new Date(this.getFullYear(),this.getMonth()+1,0).getDate()},Date.prototype.isLeapYear=function(){var e=this.getFullYear();return 0==(3&e)&&(e%100!=0||e%400==0)},Date.prototype.getDOY=function(){var e=[0,31,59,90,120,151,181,212,243,273,304,334],t=this.getMonth(),n=this.getDate(),o=e[t]+n;return t>1&&this.isLeapYear()&&o++,o},Date.prototype.getWeekDay=function(e){var t;return t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][this.getDay()],e>0&&(t=t.substring(0,e)),t},r=function(e){return e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,e.returnValue=!1,!1},o=function(e,t,n,o){o=void 0!==o&&o,"function"==typeof e.addEventListener?e.addEventListener(t,n,o):e.attachEvent("on"+t,n)},a=function(e,t,n,o){o=void 0!==o&&o,"function"==typeof e.removeEventListener?e.removeEventListener(t,n,o):e.detachEvent("on"+t,n)},l=function(e,t){var n,o,a;return n=parseInt(e.substring(0,2),16),o=parseInt(e.substring(2,4),16),a=parseInt(e.substring(4,6),16),"rgba("+n+", "+o+", "+a+", "+t+")"},i=function(e){var t;return void 0===e?t="#"+Math.floor(16777215*Math.random()).toString(16):"LIGHT"===e.toUpperCase()?t="#"+Math.floor(16777215-5592405*Math.random()).toString(16):"DARK"===e.toUpperCase()&&(t="#"+Math.floor(1864135*Math.random()).toString(16)),t},s=function(e,t){var n=document.createElement(e);return n.id=t,n},c=function(e,t){e.className=e.className.replace(" "+t,"")},d=function(e,t){t=" "+t,e.className=e.className.replace(t,""),e.className=e.className+t},e=function(e,t,n){I("selector: "+e),I("\tproperty: "+t),I("\tnewValue: "+n);var o,a,r=document.styleSheets.length,l=t+": "+n;for(o=0;o<r;o++){a=document.styleSheets[o];try{a.insertRule(e+" {"+l+"}",a.cssRules.length)}catch(t){try{a.addRule(e,l)}catch(e){}}}},u=function(e){var t,n=window,o=e.split("."),a=o.length-1;for(t=0;t<a;t++)if(void 0===(n=n[o[t]]))return;return n[o[a]]},T=function(e,t){return t=t.replace("yy",e.getUTCFullYear().toString().substr(-2)),t=t.replace("dd",("0"+e.getUTCDate()).slice(-2)),t=t.replace("mm",("0"+(e.getUTCMonth()+1)).slice(-2))},m=function(e,t){var n;return e.currentStyle?n=e.currentStyle[t]:window.getComputedStyle&&(n=document.defaultView.getComputedStyle(e,null).getPropertyValue(t)),n},I=function(e){console.log(e)},t=function(){for(var e=3,t=document.createElement("div"),n=t.getElementsByTagName("i");t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e",n[0];);return e>4?e:void 0},n=function(){return"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0},E=function(e){var t=new Date(e);return t.setMinutes(t.getMinutes()-t.getTimezoneOffset()),t},p=function(e,t){return(E(t)-E(e))/864e5},{registerEventHandler:o,unregisterEventHandler:a,stopPropagation:r,removeClassname:c,addClassname:d,addCSSRule:e,hexOpacityToRGBA:l,getRandomHexColor:i,createElementWithId:s,getFunctionFromString:u,getFormattedDate:T,treatAsUTC:E,daysBetween:p,logMsg:I,getIEVersion:t,getStyle:m,isTouchDevice:n}}(),(uk=void 0!==uk?uk:{}).co=void 0!==uk.co?uk.co:{},uk.co.firmgently=void 0!==uk.co.firmgently?uk.co.firmgently:{},uk.co.firmgently.FGHTMLBuild=function(){"use strict";var e,t,n,o,a,r,l,i,s;return e=function(e){for(var t in e)document.getElementById(t).innerHTML=e[t]},t=function(e){var t,n="string"==typeof e.parent?document.getElementById(e.parent):e.parent;return t=e.id?createElementWithId("button",e.id):document.createElement("button"),n.appendChild(t),e.class&&addClassname(t,e.class),t.innerHTML=e.label,t.ob=e,e.disabled&&(t.disabled=e.disabled),t},a=function(e){var t,n,o,a="string"==typeof e.parent?document.getElementById(e.parent):e.parent;if(e.id?(e.label&&((o=document.createElement("label")).innerHTML=e.label,a.appendChild(o),o.htmlFor=e.id),(n=createElementWithId("input",e.id)).name=e.id,n.id=e.id):n=document.createElement("input"),e.class&&addClassname(n,e.class),a.appendChild(n),e.attributes)for(t in e.attributes)n.setAttribute(""+t,""+e.attributes[t]);return n.ob=e,n},r=function(e){var t,n,o,a,r,l,i="string"==typeof e.parent?document.getElementById(e.parent):e.parent;if(e.id?(e.label&&((o=document.createElement("label")).innerHTML=e.label,i.appendChild(o),o.htmlFor=e.id),(n=createElementWithId("select",e.id)).name=e.id,n.id=e.id):n=document.createElement("select"),e.class&&addClassname(n,e.class),i.appendChild(n),n.setAttribute("size","1"),e.placeholderText&&((l=new Option(e.placeholderText,"")).disabled=!0,l.selected=!0,l.hidden=!0,n.options[n.options.length]=l),e.contentType)for(t in e.options)r=e.options[t],a=n.options[n.options.length]=new Option(r.name,r.class),addClassname(a,r.class);else for(t in e.options)n.options[n.options.length]=new Option(e.options[t],t);return n.ob=e,n},o=function(e){var t,n,o="string"==typeof e.parent?document.getElementById(e.parent):e.parent;return e.label&&((n=document.createElement("label")).innerHTML=e.label,o.appendChild(n),n.htmlFor=e.id),t=document.createElement("input"),e.class&&addClassname(t,e.class),t.setAttribute("type","checkbox"),t.id=e.id,t.name=e.id,logMsg("ob.checked: "+e.checked),t.checked=e.checked,o.appendChild(t),t.ob=e,t},n=function(e){var t,n,o,a="string"==typeof e.parent?document.getElementById(e.parent):e.parent;for(t in e.options)(o=document.createElement("label")).innerHTML=e.options[t],a.appendChild(o),n=document.createElement("input"),e.class&&addClassname(n,e.class),a.appendChild(n),n.setAttribute("type","radio"),n.id=e.id,n.name=e.id,n.value=t,logMsg("ob.checkIfMatched: "+e.checkIfMatched),t===e.checkIfMatched&&(n.checked=!0),o.htmlFor=e.id;return n},l=function(e){var t,n,o,a="string"==typeof e.parent?document.getElementById(e.parent):e.parent;if(o=e.id?createElementWithId("ul",e.id):document.createElement("ul"),addClassname(o,CLASS_ROW),e.ar)for(t=0;t<e.ar.length;t++)(n=document.createElement("li")).innerHTML=e.ar[t],o.appendChild(n),e.class&&addClassname(n,e.class);a.appendChild(o)},i=function(e){var t,n,o="string"==typeof e.parent?document.getElementById(e.parent):e.parent;switch(e.type){case GUITYPE_COL:case GUITYPE_ROW:n="span";break;case GUITYPE_SECTION:n="section";break;default:n="div"}return t=e.id?createElementWithId(n,e.id):document.createElement(n),o.appendChild(t),e.class&&addClassname(t,e.class),t},s=function(e){var t,n="string"==typeof e.parent?document.getElementById(e.parent):e.parent;return t=e.id?createElementWithId("span",e.id):document.createElement("span"),n.appendChild(t),e.class&&addClassname(t,e.class),t},{fillHTMLFromOb:e,createButtonFromOb:t,createSelectFromOb:r,createInputFromOb:a,createRadioFromOb:n,createCheckboxFromOb:o,addLIsFromOb:l,createBasicElementFromOb:i,createColorPickerFromOb:s}}(),(uk=void 0!==uk?uk:{}).co=void 0!==uk.co?uk.co:{},uk.co.firmgently=void 0!==uk.co.firmgently?uk.co.firmgently:{},uk.co.firmgently.DDDConsts=function(){"use strict";var e={label:"dd/mm/yy"};return{APP_ID:"FGDDD",GUIDATA_NAVMAIN:[{type:"GUITypeBtn",class:"btnNav",id:"timesheets",label:"Timesheets",methodPathStr:"uk.co.firmgently.DontDillyDally.navClick",args:[" > timesheets"],scopeID:"main",parent:"nav-main"},{type:"GUITypeBtn",class:"btnNav",id:"jobsClients",label:"Jobs & Clients",methodPathStr:"uk.co.firmgently.DontDillyDally.navClick",args:[" > jobsAndClients"],scopeID:"main",parent:"nav-main"},{type:"GUITypeBtn",class:"btnNav",id:"config",label:"Preferences",methodPathStr:"uk.co.firmgently.DontDillyDally.navClick",args:[" > preferences"],scopeID:"main",parent:"nav-main"}],PAGETYPE_TIMESHEETS:" > timesheets",PAGETYPE_CONFIG:" > preferences",PAGETYPE_JOBSANDCLIENTS:" > jobsAndClients",PAGETYPE_DEFAULT:" > timesheets",BODYID_TIMESHEETS:"timesheets",BODYID_CONFIG:"config",BODYID_JOBSANDCLIENTS:"jobsClients",GUITYPE_COL:"GUITypeCol",GUITYPE_ROW:"GUITypeRow",GUITYPE_BTN:"GUITypeBtn",GUITYPE_RADIOBTN:"GUITypeRadioBtn",GUITYPE_FORM:"GUITypeForm",GUITYPE_SELECT:"GUITypeSelect",GUITYPE_TEXTINPUT:"GUITypeTextInput",GUITYPE_SECTION:"GUITypeSection",GUITYPE_METHODCALL:"GUITypeMethodCall",GUITYPE_COLORPICKER:"GUITypeColorPicker",GUITYPE_UL:"GUITypeUL",TIMESHEETCONTAINER_ID:"timesheetContainer",LOADINGINDICATOR_ID:"loading-indicator",PAGEDATA_JOBSANDCLIENTS:{pageTitle:"Jobs and Clients",intro:"Add, delete or edit jobs and clients."},GUIDATA_JOBSANDCLIENTS:[{type:"GUITypeCol",id:"editClientCol",class:"col",parent:"main"},{type:"GUITypeForm",id:"createClientForm",class:"formMain",title:"Fill in client details",parent:"editClientCol",el_ar:[{type:"GUITypeRow",id:"clientNewRow",class:"row",parent:"createClientForm"},{type:"GUITypeRow",id:"clientsExistingRow",class:"row",parent:"createClientForm"},{type:"GUITypeBtn",label:"Create new",id:"createNewClientBtn",methodPathStr:"uk.co.firmgently.DontDillyDally.newClientCreate",args:[],scopeID:"createClientForm",parent:"clientNewRow"},{type:"GUITypeTextInput",id:"clientNameIn",label:"Client name",parent:"clientNewRow",methodPathStr:"uk.co.firmgently.DontDillyDally.onClientTyped",args:[],scopeID:"createClientForm",attributes:{type:"text"}},{type:"GUITypeBtn",label:"Save",id:"saveNewClientBtn",methodPathStr:"uk.co.firmgently.DontDillyDally.newClientFormSave",args:[],scopeID:"createClientForm",parent:"clientNewRow",disabled:!0},{type:"GUITypeColorPicker",id:"clientFGPicker",class:"color-picker",parent:"clientsExistingRow"},{type:"GUITypeColorPicker",id:"clientBGPicker",class:"color-picker",parent:"clientsExistingRow"},{type:"GUITypeSelect",label:"Existing clients",args:[],scopeID:"createClientForm",parent:"clientsExistingRow",methodPathStr:"uk.co.firmgently.DontDillyDally.updateSelected",id:"selectClient",contentType:"contentTypeClients"}]},{type:"GUITypeCol",id:"editJobCol",class:"col",parent:"main"},{type:"GUITypeForm",id:"createJobForm",class:"formMain",title:"Fill in job details",parent:"editJobCol",hidden:!1,el_ar:[{type:"GUITypeRow",id:"jobNewRow",class:"row",parent:"createJobForm"},{type:"GUITypeRow",id:"jobsExistingRow",class:"row",parent:"createJobForm"},{type:"GUITypeBtn",label:"Create new",id:"createNewJobBtn",methodPathStr:"uk.co.firmgently.DontDillyDally.newJobCreate",scopeID:"createJobForm",args:[],parent:"jobNewRow"},{type:"GUITypeTextInput",id:"jobNameIn",label:"Job name",parent:"jobNewRow",attributes:{type:"text"}},{type:"GUITypeBtn",label:"Save",id:"saveNewJobBtn",methodPathStr:"uk.co.firmgently.DontDillyDally.newJobFormSave",scopeID:"createJobForm",args:[],parent:"jobNewRow",disabled:!0},{type:"GUITypeColorPicker",id:"jobFGPicker",class:"color-picker",parent:"jobsExistingRow"},{type:"GUITypeColorPicker",id:"jobBGPicker",class:"color-picker",parent:"jobsExistingRow"},{type:"GUITypeSelect",label:"Existing jobs",args:[],scopeID:"createJobForm",parent:"jobsExistingRow",methodPathStr:"uk.co.firmgently.DontDillyDally.updateSelected",id:"selectJob",contentType:"contentTypeJobs"}]}],PAGEDATA_TIMESHEETS:{pageTitle:"Timesheets",intro:"Keep track of where you spend your time. Also record payments in and expenses paid out."},GUIDATA_TIMESHEETS:[{type:"GUITypeUL",id:"timesheetContainer",parent:"main"},{type:"GUITypeMethodCall",methodPathStr:"uk.co.firmgently.DontDillyDally.drawTimesheets",scopeID:"main"}],PAGEDATA_CONFIG:{pageTitle:"Preferences",intro:"Show and hide things and customise settings."},GUIDATA_CONFIG:[{type:"GUITypeForm",id:"configForm",class:"formMain",title:"Set your preferences here",parent:"main",hidden:!1,el_ar:[{type:"GUITypeRadioBtn",id:"dateFormat",label:"Format used to show dates",parent:"configForm",options:{DATETYPE_DDMMYY:"dd/mm/yy",DATETYPE_MMDDYY:"mm/dd/yy",DATETYPE_YYMMDD:"yy/mm/dd"},disabled:!0},{type:"GUITypeRadioBtn",id:"timesheetRange",label:"Choose how many days you want to show on the timesheet page",parent:"configForm",options:{timespanWeek:"A week",timespanMonth:"A month",timespanYear:"A year"},disabled:!0},{type:"GUITypeRadioBtn",id:"totalsToShow",label:"Choose which totals you want totted up and displayed",parent:"configForm",options:{showTotalsWeek:"Show weekly totals",showTotalsMonth:"Show monthly totals",showTotalsWeekAndMonth:"Show both weekly and monthly totals"},disabled:!0}]}],DATETYPE_YYMMDD:{label:"yy/mm/dd"},DATETYPE_DDMMYY:e,DATETYPE_MMDDYY:{label:"mm/dd/yy"},DATETYPE_DEFAULT:e,TIMESPAN_WEEK:"timespanWeek",TIMESPAN_MONTH:"timespanMonth",TIMESPAN_YEAR:"timespanYear",TIMESPAN_DEFAULT:"timespanMonth",DAYSINWEEK:7,DAYSINMONTH:31,DAYSINYEAR:365,CLASS_BTNNAV:"btnNav",CLASS_FORMMAIN:"formMain",CLASS_COL:"col",CLASS_ROW:"row",EL_ID_COLHEADING:"column-headings",CLIENT_STR:"client",JOB_STR:"job",EL_ID_JOBNAMEIN:"jobNameIn",EL_ID_CLIENTNAMEIN:"clientNameIn",JOB_FG_COLPICK:"jobFGPicker",JOB_BG_COLPICK:"jobBGPicker",CLIENT_FG_COLPICK:"clientFGPicker",CLIENT_BG_COLPICK:"clientBGPicker",TXT_STORAGE_UNSUPPORTED:"Sorry - storage is not supported on this device or browser",JOB_DEFAULT_1:{name:"Purchasing",color:"#000",bgcolor:"#0ff"},JOB_DEFAULT_2:{name:"Administration",color:"#0f0",bgcolor:"#123"},CLIENT_DEFAULT_1:{name:"Will @ ACME CO",color:"#fff",bgcolor:"#f00"},CLIENT_DEFAULT_2:{name:"Diamond Jules",color:"#435",bgcolor:"#89a"},CONTENTTYPE_CLIENTS:"contentTypeClients",CONTENTTYPE_JOBS:"contentTypeJobs",DATATYPE_JOB:"dataTypeJob",DATATYPE_CLIENT:"dataTypeClient",EL_ID_CLIENTSAVEBTN:"saveNewClientBtn",EL_ID_JOBSAVEBTN:"saveNewJobBtn",EL_ID_SELECTCLIENT:"selectClient",EL_ID_SELECTJOB:"selectJob",SHOWTOTALS_WEEK:"showTotalsWeek",SHOWTOTALS_MONTH:"showTotalsMonth",SHOWTOTALS_BOTH:"showTotalsWeekAndMonth",CLIENT_SELECT_PLACEHOLDER:"select client",JOB_SELECT_PLACEHOLDER:"select job",JOBNOTES_PLACEHOLDER:"job notes",MONEYNOTES_PLACEHOLDER:"money notes",SHOWTOTALS_DEFAULT:"showTotalsWeekAndMonth"}}(),(uk=void 0!==uk?uk:{}).co=void 0!==uk.co?uk.co:{},uk.co.firmgently=void 0!==uk.co.firmgently?uk.co.firmgently:{},uk.co.firmgently.DontDillyDally=function(){"use strict";var e,t,n,o,a,r,l,i,s,c,d,m,E,p,T,u,I,y,g,C,h,D,_,b,S,A,f,N,O,L,P,k,B,v,G,M,F,U,w,Y,R,H,J;for(e in uk.co.firmgently.DDDConsts)this[e]=uk.co.firmgently.DDDConsts[e];for(e in uk.co.firmgently.FGUtils)this[e]=uk.co.firmgently.FGUtils[e];for(e in uk.co.firmgently.FGHTMLBuild)this[e]=uk.co.firmgently.FGHTMLBuild[e];return B=function(){if("undefined"!=typeof Storage)return!0;logMsg(TXT_STORAGE_UNSUPPORTED)},v=function(){M("prefs")||(G("prefs",{pagetype:PAGETYPE_DEFAULT,timespan:TIMESPAN_DEFAULT,dateFormat:DATETYPE_DEFAULT,totalsToShow:SHOWTOTALS_DEFAULT}),G("clientNum",0),G("jobNum",0),G(CLIENT_STR,{}),U(CLIENT_DEFAULT_1,DATATYPE_CLIENT),U(CLIENT_DEFAULT_2,DATATYPE_CLIENT),G(JOB_STR,{}),U(JOB_DEFAULT_1,DATATYPE_JOB),U(JOB_DEFAULT_2,DATATYPE_JOB),G("day",{}))},G=function(e,t){localStorage.setItem(APP_ID+"_"+e,JSON.stringify(t))},M=function(e){return JSON.parse(localStorage.getItem(APP_ID+"_"+e))},F=function(e,t,n){var o,a=M(e);for(o in a)if(o===t){a[o]=n;break}G(e,a)},p=function(){t=new Date,n=new Date,o=new Date,localStorage.clear(),B()&&(v(),y(GUIDATA_NAVMAIN),T(location.hash?decodeURIComponent(location.hash.substring(1)):M("prefs").pagetype))},T=function(e){logMsg("selectPage('"+e+"')"),F("prefs","pagetype",e),location.hash=e,I(),setTimeout(u,100)},I=function(){removeClassname(document.getElementById(LOADINGINDICATOR_ID),"hidden"),document.getElementById("main").innerHTML=""},u=function(){switch(M("prefs").pagetype){case PAGETYPE_TIMESHEETS:document.body.id=BODYID_TIMESHEETS,fillHTMLFromOb(PAGEDATA_TIMESHEETS),y(GUIDATA_TIMESHEETS);break;case PAGETYPE_CONFIG:document.body.id=BODYID_CONFIG,fillHTMLFromOb(PAGEDATA_CONFIG),y(GUIDATA_CONFIG);break;case PAGETYPE_JOBSANDCLIENTS:document.body.id=BODYID_JOBSANDCLIENTS,fillHTMLFromOb(PAGEDATA_JOBSANDCLIENTS),y(GUIDATA_JOBSANDCLIENTS)}R(),addClassname(document.getElementById(LOADINGINDICATOR_ID),"hidden")},y=function(e){var t,n,o;for(t=0;t<e.length;t++)switch((n=e[t]).type){case GUITYPE_BTN:o=createButtonFromOb(n),n.methodPathStr&&registerEventHandler(o,"mousedown",h);break;case GUITYPE_FORM:g(n);break;case GUITYPE_TEXTINPUT:o=createInputFromOb(n),n.methodPathStr&&(registerEventHandler(o,"change",h),registerEventHandler(o,"keyup",h),registerEventHandler(o,"paste",h),registerEventHandler(o,"input",h));break;case GUITYPE_SELECT:o=createSelectFromOb(n),n.methodPathStr&&registerEventHandler(o,"change",h);break;case GUITYPE_RADIOBTN:n.checkIfMatched=M("prefs").timespan,o=createRadioFromOb(n),n.methodPathStr&&registerEventHandler(o,"change",h);break;case GUITYPE_UL:addLIsFromOb(n);break;case GUITYPE_SECTION:case GUITYPE_COL:case GUITYPE_ROW:createBasicElementFromOb(n);break;case GUITYPE_COLORPICKER:createColorPickerFromOb(n);break;case GUITYPE_METHODCALL:D(n)}},g=function(e){var t,n=document.getElementById(e.parent);return t=e.id?createElementWithId("form",e.id):document.createElement("form"),n.appendChild(t),e.class&&addClassname(t,e.class),e.title&&(t.innerHTML="<h2>"+e.title+"</h2>"),e.el_ar&&y(e.el_ar),e.hidden&&(t.style.display="none"),t.ob=e,registerEventHandler(t,"submit",L),registerEventHandler(t,"click",_),t},C=function(){J(this.parentNode)},S=function(e){var t,n;return e===DATATYPE_JOB?t=JOB_STR:e===DATATYPE_CLIENT&&(t=CLIENT_STR),n=0+M(t+"Num")+1,G(t+"Num",n),t+n},U=function(e,t){logMsg("createClientOrJobFromOb()");var n,o,a,r,l,i;t===DATATYPE_CLIENT?(document.getElementById(EL_ID_CLIENTNAMEIN),a=CLIENT_STR):t===DATATYPE_JOB&&(document.getElementById(EL_ID_JOBNAMEIN),a=JOB_STR),n=S(t),e.id=n,e.class=n,(o=M(a))[e.id]=e,G(a,o),r="."+n+", ."+n+":hover, ."+n+":active",addCSSRule(r,"color",e.color),addCSSRule(r,"background-color",e.bgcolor),t===DATATYPE_CLIENT?(l="#"+CLIENT_FG_COLPICK,i="#"+CLIENT_BG_COLPICK):t===DATATYPE_JOB&&(l="#"+JOB_FG_COLPICK,i="#"+JOB_BG_COLPICK),addCSSRule(l,"background-color",e.color),addCSSRule(i,"background-color",e.bgcolor)},h=function(e){D(e.target.ob,e)},D=function(e,t){logMsg("callMethodFromOb()");var n;n=e.scope?e.scope:e.scopeID?document.getElementById(e.scopeID):void 0,logMsg("\tob.methodPathStr: "+e.methodPathStr),logMsg("\tscope: "+n),t&&(e.args?e.args.push(t):e.args=[t]),getFunctionFromString(e.methodPathStr).apply(n,e.args)},O=function(){l.disabled=a.value.isEmpty()},function(){i.disabled=r.value.isEmpty()},b=function(){var e,t,n,a,r,l,i,s,c,d,m=document.getElementById(TIMESHEETCONTAINER_ID),p=document.createDocumentFragment(),T=M("day"),u=new Date;switch(M("prefs").timespan){case TIMESPAN_WEEK:r=u.getDay(),u.setDate(u.getDate()-r+1),n=DAYSINWEEK;break;case TIMESPAN_MONTH:u.setDate(1),n=u.monthDays();break;case TIMESPAN_YEAR:u.setMonth(0),u.setDate(1),n=DAYSINYEAR,u.isLeapYear()&&(n+=1)}for(logMsg("daysToDraw: "+n),a=!1,e=0;e<n;e++)if(E=u.getDOY(),l="day row ",!Math.round(daysBetween(u,o))&&(l+="today "),a&&(l+="odd "),a=!a,1===u.getDay()&&(l+="week-start "),1===u.getDate()&&(l+="month-start "),i=createElementWithId("li","day"+E),addClassname(i,l),i.setAttribute("dayOfYear",E),p.appendChild(i),s=document.createElement("p"),addClassname(s,"date col"),s.innerHTML=u.getWeekDay(1)+"&nbsp;|&nbsp;"+getFormattedDate(u,DATETYPE_DEFAULT.label),u.setDate(u.getDate()+1),i.appendChild(s),c=document.createElement("ul"),addClassname(c,"day-data col"),i.appendChild(c),void 0===(d=T[E]))J(c);else for(t=0;t<d.length;t++)J(c);m.appendChild(p)},J=function(e){var t,n,o;n="item"+e.parentNode.getAttribute("dayOfYear")+"_"+e.children.length,o=createElementWithId("li",n),e.appendChild(o),(t=createInputFromOb({class:"count hrs",parent:o,attributes:{type:"number",value:"00"},methodPathStr:"uk.co.firmgently.DontDillyDally.onUpdateInput"})).ob.scope=t,registerEventHandler(t,"change",h),registerEventHandler(t,"keyup",h),registerEventHandler(t,"paste",h),registerEventHandler(t,"input",h),(t=createSelectFromOb({contentType:CONTENTTYPE_CLIENTS,placeholderText:CLIENT_SELECT_PLACEHOLDER,options:M(CLIENT_STR),parent:o,methodPathStr:"uk.co.firmgently.DontDillyDally.updateSelected"})).ob.scope=t,registerEventHandler(t,"change",h),(t=createSelectFromOb({contentType:CONTENTTYPE_JOBS,placeholderText:JOB_SELECT_PLACEHOLDER,options:M(JOB_STR),parent:o,methodPathStr:"uk.co.firmgently.DontDillyDally.updateSelected"})).ob.scope=t,registerEventHandler(t,"change",h),t=createInputFromOb({class:"notes job",parent:o,attributes:{type:"text",placeholder:JOBNOTES_PLACEHOLDER},methodPathStr:"uk.co.firmgently.DontDillyDally.onUpdateInput",scopeID:n}),registerEventHandler(t,"change",h),registerEventHandler(t,"keyup",h),registerEventHandler(t,"paste",h),registerEventHandler(t,"input",h),t=createButtonFromOb({class:"removeTaskBtn",label:"-",parent:o,methodPathStr:"uk.co.firmgently.DontDillyDally.removeTask",scopeID:n}),registerEventHandler(t,"mousedown",h),t=createButtonFromOb({class:"addTaskBtn",label:"+",parent:o,methodPathStr:"uk.co.firmgently.DontDillyDally.addTask",scopeID:n}),registerEventHandler(t,"mousedown",h),t=createCheckboxFromOb({class:"isMoneyTaskChk",label:"money",parent:o,checked:!1,methodPathStr:"uk.co.firmgently.DontDillyDally.onIsMoneyTaskChkChange",scopeID:n}),registerEventHandler(t,"change",h)},R=function(){a=document.getElementById(EL_ID_CLIENTNAMEIN),l=document.getElementById(EL_ID_CLIENTSAVEBTN),s=document.getElementById(CLIENT_FG_COLPICK),c=document.getElementById(CLIENT_BG_COLPICK),r=document.getElementById(EL_ID_JOBNAMEIN),i=document.getElementById(EL_ID_JOBSAVEBTN),d=document.getElementById(JOB_FG_COLPICK),m=document.getElementById(JOB_BG_COLPICK)},_=function(e){var t=e.target.form;if(t&&t.id)switch(t.id){case"configForm":F("prefs","timespan",t.timesheetRange.value),F("prefs","dateFormat",uk.co.firmgently.DDDConsts[t.dateFormat.value]),F("prefs","totalsToShow",t.totalsToShow.value)}},L=function(e){logMsg("FORM SUBMITTED"),stopPropagation(e)},P=function(e){logMsg(this),logMsg(e)},k=function(){var e=this.getElementsByClassName("isMoneyTaskChk")[0],t=this.getElementsByClassName("count")[0],n=this.getElementsByClassName("notes")[0];e.checked?(addClassname(t,"money"),removeClassname(t,"hrs"),addClassname(n,"money"),removeClassname(n,"job"),n.placeholder=MONEYNOTES_PLACEHOLDER):(addClassname(t,"hrs"),removeClassname(t,"money"),addClassname(n,"job"),removeClassname(n,"money"),n.placeholder=JOBNOTES_PLACEHOLDER),logMsg("\tcheckbox: "+e),logMsg("\tinput: "+n),logMsg("\tinput.id: "+n.id)},A=function(){var e=getRandomHexColor("dark"),t=getRandomHexColor("light");logMsg("newClientCreate()"),document.getElementById(EL_ID_CLIENTNAMEIN).value=S(DATATYPE_CLIENT),addCSSRule("#"+CLIENT_FG_COLPICK,"background-color",e),addCSSRule("#"+CLIENT_BG_COLPICK,"background-color",t),addCSSRule("#"+EL_ID_CLIENTNAMEIN,"color",e),addCSSRule("#"+EL_ID_CLIENTNAMEIN,"background-color",t),l.disabled=!1,R()},f=function(){var e=getRandomHexColor("light"),t=getRandomHexColor("dark");logMsg("newJobCreate()"),document.getElementById(EL_ID_JOBNAMEIN).value=S(DATATYPE_JOB),addCSSRule("#"+JOB_FG_COLPICK,"background-color",e),addCSSRule("#"+JOB_BG_COLPICK,"background-color",t),addCSSRule("#"+EL_ID_JOBNAMEIN,"color",e),addCSSRule("#"+EL_ID_JOBNAMEIN,"background-color",t),i.disabled=!1,R()},w=function(){U({name:document.getElementById(EL_ID_CLIENTNAMEIN).value,color:getStyle(s,"background-color"),bgcolor:getStyle(c,"background-color")},DATATYPE_CLIENT),u()},Y=function(){U({name:document.getElementById(EL_ID_JOBNAMEIN).value,color:getStyle(d,"background-color"),bgcolor:getStyle(m,"background-color")},DATATYPE_JOB),u()},N=function(e){T(arguments[0])},function(e){e.getAttribute("dayOfYear"),e.getAttribute("itemNum")},H=function(){var e,t,n=this.value,o=M("prefs").pagetype,a=(this.parentNode,this.parentNode.parentNode.getAttribute("dayOfYear"));switch(o){case PAGETYPE_TIMESHEETS:case PAGETYPE_JOBSANDCLIENTS:this.className=n;break;case PAGETYPE_CONFIG:}o===PAGETYPE_TIMESHEETS&&(void 0===(t=(e=M("day"))[a])&&(t={work:[]}),t.work.push({time:"02:30",client:"test client",job:"test job",jobNotes:"painting the edges",money:-50,moneyNotes:"bought canvas REceipt no.11234"}),e[a]=t,G("day",e))},p(),{drawTimesheets:b,addTask:C,navClick:N,newClientCreate:A,newJobCreate:f,newClientFormSave:w,newJobFormSave:Y,updateSelected:H,onUpdateInput:P,onIsMoneyTaskChkChange:k,onClientTyped:O}}.call(this);
//# sourceMappingURL=FGDontDillyDally.js.map
