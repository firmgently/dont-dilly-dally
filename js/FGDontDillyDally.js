var uk=void 0!==uk?uk:{};uk.co=void 0!==uk.co?uk.co:{},uk.co.firmgently=void 0!==uk.co.firmgently?uk.co.firmgently:{},uk.co.firmgently.FGUtils=function(){"use strict";var e,t,a,n,o,r,l,i,d,c,s,m,p,E,T,u;return String.prototype.isEmpty=function(){return!this||/^\s*$/.test(this)},Storage.prototype.setObject=function(e,t){this.setItem(e,JSON.stringify(t))},Storage.prototype.getObject=function(e){var t=this.getItem(e);return t&&JSON.parse(t)},Date.prototype.monthDays=function(){return new Date(this.getFullYear(),this.getMonth()+1,0).getDate()},Date.prototype.isLeapYear=function(){var e=this.getFullYear();return 0==(3&e)&&(e%100!=0||e%400==0)},Date.prototype.getDOY=function(){var e=[0,31,59,90,120,151,181,212,243,273,304,334],t=this.getMonth(),a=this.getDate(),n=e[t]+a;return t>1&&this.isLeapYear()&&n++,n},Date.prototype.getWeekDay=function(e){var t;return t=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][this.getDay()],e>0&&(t=t.substring(0,e)),t},r=function(e){return e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,e.returnValue=!1,!1},n=function(e,t,a,n){n=void 0!==n&&n,"function"==typeof e.addEventListener?e.addEventListener(t,a,n):e.attachEvent("on"+t,a)},o=function(e,t,a,n){n=void 0!==n&&n,"function"==typeof e.removeEventListener?e.removeEventListener(t,a,n):e.detachEvent("on"+t,a)},l=function(e,t){var a,n,o;return a=parseInt(e.substring(0,2),16),n=parseInt(e.substring(2,4),16),o=parseInt(e.substring(4,6),16),"rgba("+a+", "+n+", "+o+", "+t+")"},i=function(e){var t;return void 0===e?t="#"+Math.floor(16777215*Math.random()).toString(16):"LIGHT"===e.toUpperCase()?t="#"+Math.floor(16777215-5592405*Math.random()).toString(16):"DARK"===e.toUpperCase()&&(t="#"+Math.floor(1864135*Math.random()).toString(16)),t},d=function(e,t){var a=document.createElement(e);return a.id=t,a},c=function(e,t){e.className=e.className.replace(" "+t,"")},s=function(e,t){t=" "+t,e.className=e.className.replace(t,""),e.className=e.className+t},e=function(e,t,a){var n,o,r=document.styleSheets.length,l=t+": "+a;for(n=0;n<r;n++){o=document.styleSheets[n];try{o.insertRule(e+" {"+l+"}",o.cssRules.length)}catch(t){try{o.addRule(e,l)}catch(e){}}}},T=function(e,t){return t=t.replace("yy",e.getUTCFullYear().toString().substr(-2)),t=t.replace("dd",("0"+e.getUTCDate()).slice(-2)),t=t.replace("mm",("0"+(e.getUTCMonth()+1)).slice(-2))},m=function(e,t){var a;return e.currentStyle?a=e.currentStyle[t]:window.getComputedStyle&&(a=document.defaultView.getComputedStyle(e,null).getPropertyValue(t)),a},u=function(e){console.log(e)},t=function(){for(var e=3,t=document.createElement("div"),a=t.getElementsByTagName("i");t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e",a[0];);return e>4?e:void 0},a=function(){return"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0},p=function(e){var t=new Date(e);return t.setMinutes(t.getMinutes()-t.getTimezoneOffset()),t},E=function(e,t){return(p(t)-p(e))/864e5},{registerEventHandler:n,unregisterEventHandler:o,stopPropagation:r,removeClassname:c,addClassname:s,addCSSRule:e,hexOpacityToRGBA:l,getRandomHexColor:i,createElementWithId:d,getFormattedDate:T,treatAsUTC:p,daysBetween:E,logMsg:u,getIEVersion:t,getStyle:m,isTouchDevice:a}}();var uk=void 0!==uk?uk:{};uk.co=void 0!==uk.co?uk.co:{},uk.co.firmgently=void 0!==uk.co.firmgently?uk.co.firmgently:{},uk.co.firmgently.FGHTMLBuild=function(){"use strict";var e,t,a,n,o,r,l,i;return e=function(e){for(var t in e)document.getElementById(t).innerHTML=e[t]},t=function(e){var t,a="string"==typeof e.parent?document.getElementById(e.parent):e.parent;return t=e.id?createElementWithId("button",e.id):document.createElement("button"),a.appendChild(t),e.class&&addClassname(t,e.class),t.innerHTML=e.label,t.ob=e,e.disabled&&(t.disabled=e.disabled),t},n=function(e){var t,a,n,o="string"==typeof e.parent?document.getElementById(e.parent):e.parent;if(e.id?(e.label&&((n=document.createElement("label")).innerHTML=e.label,o.appendChild(n),n.htmlFor=e.id),(a=createElementWithId("input",e.id)).name=e.id,a.id=e.id):a=document.createElement("input"),e.class&&addClassname(a,e.class),o.appendChild(a),e.attributes)for(t in e.attributes)a.setAttribute(""+t,""+e.attributes[t]);return a.ob=e,a},o=function(e){var t,a,n,o,r,l="string"==typeof e.parent?document.getElementById(e.parent):e.parent;if(e.id?(e.label&&((n=document.createElement("label")).innerHTML=e.label,l.appendChild(n),n.htmlFor=e.id),(a=createElementWithId("select",e.id)).name=e.id,a.id=e.id):a=document.createElement("select"),e.class&&addClassname(a,e.class),l.appendChild(a),a.setAttribute("size","1"),e.contentType)for(t in e.options)r=e.options[t],o=a.options[a.options.length]=new Option(r.name,r.class),addClassname(o,r.class),addCSSRule("."+r.class,"background-color",r.bgcolor),addCSSRule("."+r.class,"color",r.color);else for(t in e.options)a.options[a.options.length]=new Option(e.options[t],t);return a.ob=e,a},a=function(e){var t,a,n,o="string"==typeof e.parent?document.getElementById(e.parent):e.parent;for(t in e.options)(n=document.createElement("label")).innerHTML=e.options[t],o.appendChild(n),a=document.createElement("input"),e.class&&addClassname(a,e.class),o.appendChild(a),a.setAttribute("type","radio"),a.id=e.id,a.name=e.id,a.value=t,logMsg("ob.checkIfMatched: "+e.checkIfMatched),t===e.checkIfMatched&&(a.checked=!0),n.htmlFor=e.id;return a},r=function(e){var t,a,n=createElementWithId("ul",EL_ID_COLHEADING),o="string"==typeof e.parent?document.getElementById(e.parent):e.parent;for(addClassname(n,CLASS_ROW),t=0;t<e.ar.length;t++)(a=document.createElement("li")).innerHTML=e.ar[t],n.appendChild(a),e.class&&addClassname(a,e.class);o.appendChild(n)},l=function(e){var t,a,n="string"==typeof e.parent?document.getElementById(e.parent):e.parent;switch(e.type){case GUITYPE_COL:case GUITYPE_ROW:a="span";break;case GUITYPE_SECTION:a="section";break;default:a="div"}return t=e.id?createElementWithId(a,e.id):document.createElement(a),n.appendChild(t),e.class&&addClassname(t,e.class),t},i=function(e){var t,a="string"==typeof e.parent?document.getElementById(e.parent):e.parent;return t=e.id?createElementWithId("span",e.id):document.createElement("span"),a.appendChild(t),e.class&&addClassname(t,e.class),t},{fillHTMLFromOb:e,createButtonFromOb:t,createSelectFromOb:o,createInputFromOb:n,createRadioFromOb:a,addLIsFromOb:r,createBasicElementFromOb:l,createColorPickerFromOb:i}}();var uk=void 0!==uk?uk:{};uk.co=void 0!==uk.co?uk.co:{},uk.co.firmgently=void 0!==uk.co.firmgently?uk.co.firmgently:{},uk.co.firmgently.DDDConsts=function(){"use strict";var e={label:"dd/mm/yy"};return{APP_ID:"FGDDD",GUIDATA_NAVMAIN:[{type:"GUITypeBtn",class:"btnNav",id:"timesheets",label:"Timesheets",methodName:"navClick",args:[" > timesheets"],scopeID:"main",parent:"nav-main"},{type:"GUITypeBtn",class:"btnNav",id:"jobsClients",label:"Jobs & Clients",methodName:"navClick",args:[" > jobsAndClients"],scopeID:"main",parent:"nav-main"},{type:"GUITypeBtn",class:"btnNav",id:"config",label:"Preferences",methodName:"navClick",args:[" > preferences"],scopeID:"main",parent:"nav-main"},{type:"GUITypeUL",ar:["date","hrs","client","job","job notes","£","£ notes"],ulID:"column-headings",class:"col",parent:"header-main"}],PAGETYPE_TIMESHEETS:" > timesheets",PAGETYPE_CONFIG:" > preferences",PAGETYPE_JOBSANDCLIENTS:" > jobsAndClients",PAGETYPE_DEFAULT:" > timesheets",BODYID_TIMESHEETS:"timesheets",BODYID_CONFIG:"config",BODYID_JOBSANDCLIENTS:"jobsClients",GUITYPE_COL:"GUITypeCol",GUITYPE_ROW:"GUITypeRow",GUITYPE_BTN:"GUITypeBtn",GUITYPE_RADIOBTN:"GUITypeRadioBtn",GUITYPE_FORM:"GUITypeForm",GUITYPE_SELECT:"GUITypeSelect",GUITYPE_TEXTINPUT:"GUITypeTextInput",GUITYPE_SECTION:"GUITypeSection",GUITYPE_METHODCALL:"GUITypeMethodCall",GUITYPE_COLORPICKER:"GUITypeColorPicker",GUITYPE_UL:"GUITypeUL",TIMESHEETCONTAINER_ID:"timesheetContainer",LOADINGINDICATOR_ID:"loading-indicator",PAGEDATA_JOBSANDCLIENTS:{pageTitle:"Jobs and Clients",intro:"Add, delete or edit jobs and clients."},GUIDATA_JOBSANDCLIENTS:[{type:"GUITypeCol",id:"editClientCol",class:"col",parent:"main"},{type:"GUITypeForm",id:"createClientForm",class:"formMain",title:"Fill in client details",parent:"editClientCol",el_ar:[{type:"GUITypeRow",id:"clientNewRow",class:"row",parent:"createClientForm"},{type:"GUITypeRow",id:"clientsExistingRow",class:"row",parent:"createClientForm"},{type:"GUITypeBtn",label:"Create new",id:"createNewClientBtn",methodName:"newClientCreate",args:[],scopeID:"createClientForm",parent:"clientNewRow"},{type:"GUITypeTextInput",id:"clientNameIn",label:"Client name",parent:"clientNewRow",methodName:"onClientTyped",args:[],scopeID:"createClientForm",attributes:{type:"text"}},{type:"GUITypeBtn",label:"Save",id:"saveNewClientBtn",methodName:"newClientFormSave",args:[],scopeID:"createClientForm",parent:"clientNewRow",disabled:!0},{type:"GUITypeColorPicker",id:"clientFGPicker",class:"color-picker",parent:"clientsExistingRow"},{type:"GUITypeColorPicker",id:"clientBGPicker",class:"color-picker",parent:"clientsExistingRow"},{type:"GUITypeSelect",label:"Existing clients",args:[],scopeID:"createClientForm",parent:"clientsExistingRow",methodName:"updateSelected",id:"selectClient",contentType:"contentTypeClients"}]},{type:"GUITypeCol",id:"editJobCol",class:"col",parent:"main"},{type:"GUITypeForm",id:"createJobForm",class:"formMain",title:"Fill in job details",parent:"editJobCol",hidden:!1,el_ar:[{type:"GUITypeRow",id:"jobNewRow",class:"row",parent:"createJobForm"},{type:"GUITypeRow",id:"jobsExistingRow",class:"row",parent:"createJobForm"},{type:"GUITypeBtn",label:"Create new",id:"createNewJobBtn",methodName:"newJobCreate",scopeID:"createJobForm",args:[],parent:"jobNewRow"},{type:"GUITypeTextInput",id:"jobNameIn",label:"Job name",parent:"jobNewRow",attributes:{type:"text"}},{type:"GUITypeBtn",label:"Save",id:"saveNewJobBtn",methodName:"newJobFormSave",scopeID:"createJobForm",args:[],parent:"jobNewRow",disabled:!0},{type:"GUITypeColorPicker",id:"jobFGPicker",class:"color-picker",parent:"jobsExistingRow"},{type:"GUITypeColorPicker",id:"jobBGPicker",class:"color-picker",parent:"jobsExistingRow"},{type:"GUITypeSelect",label:"Existing jobs",args:[],scopeID:"createJobForm",parent:"jobsExistingRow",methodName:"updateSelected",id:"selectJob",contentType:"contentTypeJobs"}]}],PAGEDATA_TIMESHEETS:{pageTitle:"Timesheets",intro:"Keep track of where you spend your time. Also record payments in and expenses paid out."},GUIDATA_TIMESHEETS:[{type:"GUITypeSection",id:"timesheetContainer",parent:"main"},{type:"GUITypeMethodCall",methodName:"drawTimesheets",scopeID:"main"}],PAGEDATA_CONFIG:{pageTitle:"Preferences",intro:"Show and hide things and customise settings."},GUIDATA_CONFIG:[{type:"GUITypeForm",id:"configForm",class:"formMain",title:"Set your preferences here",parent:"main",hidden:!1,el_ar:[{type:"GUITypeRadioBtn",id:"dateFormat",label:"Format used to show dates",parent:"configForm",options:{DATETYPE_DDMMYY:"dd/mm/yy",DATETYPE_MMDDYY:"mm/dd/yy",DATETYPE_YYMMDD:"yy/mm/dd"},disabled:!0},{type:"GUITypeRadioBtn",id:"timesheetRange",label:"Choose how many days you want to show on the timesheet page",parent:"configForm",options:{timespanWeek:"A week",timespanMonth:"A month",timespanYear:"A year"},disabled:!0},{type:"GUITypeRadioBtn",id:"totalsToShow",label:"Choose which totals you want totted up and displayed",parent:"configForm",options:{showTotalsWeek:"Show weekly totals",showTotalsMonth:"Show monthly totals",showTotalsWeekAndMonth:"Show both weekly and monthly totals"},disabled:!0}]}],DATETYPE_YYMMDD:{label:"yy/mm/dd"},DATETYPE_DDMMYY:e,DATETYPE_MMDDYY:{label:"mm/dd/yy"},DATETYPE_DEFAULT:e,TIMESPAN_WEEK:"timespanWeek",TIMESPAN_MONTH:"timespanMonth",TIMESPAN_YEAR:"timespanYear",TIMESPAN_DEFAULT:"timespanMonth",DAYSINWEEK:7,DAYSINMONTH:31,DAYSINYEAR:365,CLASS_BTNNAV:"btnNav",CLASS_FORMMAIN:"formMain",CLASS_COL:"col",CLASS_ROW:"row",EL_ID_COLHEADING:"column-headings",CLIENT_STR:"client",JOB_STR:"job",EL_ID_JOBNAMEIN:"jobNameIn",EL_ID_CLIENTNAMEIN:"clientNameIn",JOB_FG_COLPICK:"jobFGPicker",JOB_BG_COLPICK:"jobBGPicker",CLIENT_FG_COLPICK:"clientFGPicker",CLIENT_BG_COLPICK:"clientBGPicker",TXT_STORAGE_UNSUPPORTED:"Sorry - storage is not supported on this device or browser",JOB_DEFAULT_1:{name:"Purchasing",color:"#000",bgcolor:"#0ff"},JOB_DEFAULT_2:{name:"Administration",color:"#0f0",bgcolor:"#123"},CLIENT_DEFAULT_1:{name:"Will @ ACME CO",color:"#fff",bgcolor:"#f00"},CLIENT_DEFAULT_2:{name:"Diamond Jules",color:"#435",bgcolor:"#821"},CONTENTTYPE_CLIENTS:"contentTypeClients",CONTENTTYPE_JOBS:"contentTypeJobs",DATATYPE_JOB:"dataTypeJob",DATATYPE_CLIENT:"dataTypeClient",EL_ID_CLIENTSAVEBTN:"saveNewClientBtn",EL_ID_JOBSAVEBTN:"saveNewJobBtn",EL_ID_SELECTCLIENT:"selectClient",EL_ID_SELECTJOB:"selectJob",SHOWTOTALS_WEEK:"showTotalsWeek",SHOWTOTALS_MONTH:"showTotalsMonth",SHOWTOTALS_BOTH:"showTotalsWeekAndMonth",SHOWTOTALS_DEFAULT:"showTotalsWeekAndMonth"}}();var uk=void 0!==uk?uk:{};uk.co=void 0!==uk.co?uk.co:{},uk.co.firmgently=void 0!==uk.co.firmgently?uk.co.firmgently:{},uk.co.firmgently.DontDillyDally=function(){"use strict";var prop,dateDisplayStart,dateDisplaySelected,dateToday,clientNameInput_el,jobNameInput_el,clientSaveBtn_el,jobSaveBtn_el,colPickClientFG_el,colPickClientBG_el,colPickJobFG_el,colPickJobBG_el,dayOfYear,doSetup,selectPage,drawPage,clearPage,drawGUIFromAr,createFormFromOb,addTask,callMethodFromObOnElement,callMethodFromOb,onFormClick,drawTimesheets,getNextName,newClientCreate,newJobCreate,navClick,onClientTyped,onJobTyped,onFormSubmit,dataStoragePossible,initDataObject,dataStoreObject,dataRetrieveObject,dataUpdateObject,clientAndJobStyleSheet,createClientOrJobFromOb,newClientFormSave,newJobFormSave,clientInputWasLastEmpty,updateRefsToElements,updateSelected,addWorkItem,updateSavedWorkItem;for(prop in uk.co.firmgently.DDDConsts)this[prop]=uk.co.firmgently.DDDConsts[prop];for(prop in uk.co.firmgently.FGUtils)this[prop]=uk.co.firmgently.FGUtils[prop];for(prop in uk.co.firmgently.FGHTMLBuild)this[prop]=uk.co.firmgently.FGHTMLBuild[prop];dataStoragePossible=function(){if("undefined"!=typeof Storage)return!0;logMsg(TXT_STORAGE_UNSUPPORTED)},initDataObject=function(){dataRetrieveObject("prefs")||(dataStoreObject("prefs",{pagetype:PAGETYPE_DEFAULT,timespan:TIMESPAN_DEFAULT,dateFormat:DATETYPE_DEFAULT,totalsToShow:SHOWTOTALS_DEFAULT}),dataStoreObject("clientNum",0),dataStoreObject("jobNum",0),dataStoreObject(CLIENT_STR,{}),createClientOrJobFromOb(CLIENT_DEFAULT_1,DATATYPE_CLIENT),createClientOrJobFromOb(CLIENT_DEFAULT_2,DATATYPE_CLIENT),dataStoreObject(JOB_STR,{}),createClientOrJobFromOb(JOB_DEFAULT_1,DATATYPE_JOB),createClientOrJobFromOb(JOB_DEFAULT_2,DATATYPE_JOB),dataStoreObject("day",{}))},dataStoreObject=function(e,t){localStorage.setItem(APP_ID+"_"+e,JSON.stringify(t))},dataRetrieveObject=function(e){return JSON.parse(localStorage.getItem(APP_ID+"_"+e))},dataUpdateObject=function(e,t,a){var n,o=dataRetrieveObject(e);for(n in o)if(n===t){o[n]=a;break}dataStoreObject(e,o)},doSetup=function(){dateDisplayStart=new Date,dateDisplaySelected=new Date,dateToday=new Date,localStorage.clear(),dataStoragePossible()&&(initDataObject(),drawGUIFromAr(GUIDATA_NAVMAIN),selectPage(location.hash?decodeURIComponent(location.hash.substring(1)):dataRetrieveObject("prefs").pagetype))},selectPage=function(e){logMsg("selectPage('"+e+"')"),dataUpdateObject("prefs","pagetype",e),location.hash=e,clearPage(),setTimeout(drawPage,100)},clearPage=function(){removeClassname(document.getElementById(LOADINGINDICATOR_ID),"hidden"),document.getElementById("main").innerHTML=""},drawPage=function(){switch(dataRetrieveObject("prefs").pagetype){case PAGETYPE_TIMESHEETS:document.body.id=BODYID_TIMESHEETS,fillHTMLFromOb(PAGEDATA_TIMESHEETS),drawGUIFromAr(GUIDATA_TIMESHEETS);break;case PAGETYPE_CONFIG:document.body.id=BODYID_CONFIG,fillHTMLFromOb(PAGEDATA_CONFIG),drawGUIFromAr(GUIDATA_CONFIG);break;case PAGETYPE_JOBSANDCLIENTS:document.body.id=BODYID_JOBSANDCLIENTS,fillHTMLFromOb(PAGEDATA_JOBSANDCLIENTS),drawGUIFromAr(GUIDATA_JOBSANDCLIENTS)}updateRefsToElements(),addClassname(document.getElementById(LOADINGINDICATOR_ID),"hidden")},drawGUIFromAr=function(e){var t,a,n;for(t=0;t<e.length;t++)switch((a=e[t]).type){case GUITYPE_BTN:n=createButtonFromOb(a),a.methodName&&registerEventHandler(n,"mousedown",callMethodFromObOnElement);break;case GUITYPE_FORM:createFormFromOb(a);break;case GUITYPE_TEXTINPUT:n=createInputFromOb(a),a.methodName&&(registerEventHandler(n,"change",callMethodFromObOnElement),registerEventHandler(n,"keyup",callMethodFromObOnElement),registerEventHandler(n,"paste",callMethodFromObOnElement),registerEventHandler(n,"input",callMethodFromObOnElement));break;case GUITYPE_SELECT:n=createSelectFromOb(a),a.methodName&&registerEventHandler(n,"change",callMethodFromObOnElement);break;case GUITYPE_RADIOBTN:a.checkIfMatched=dataRetrieveObject("prefs").timespan,n=createRadioFromOb(a),a.methodName&&registerEventHandler(n,"change",callMethodFromObOnElement);break;case GUITYPE_UL:addLIsFromOb(a);break;case GUITYPE_SECTION:case GUITYPE_COL:case GUITYPE_ROW:createBasicElementFromOb(a);break;case GUITYPE_COLORPICKER:createColorPickerFromOb(a);break;case GUITYPE_METHODCALL:callMethodFromOb(a)}},createFormFromOb=function(e){var t,a=document.getElementById(e.parent);return t=e.id?createElementWithId("form",e.id):document.createElement("form"),a.appendChild(t),e.class&&addClassname(t,e.class),e.title&&(t.innerHTML="<h2>"+e.title+"</h2>"),e.el_ar&&drawGUIFromAr(e.el_ar),e.hidden&&(t.style.display="none"),t.ob=e,registerEventHandler(t,"submit",onFormSubmit),registerEventHandler(t,"click",onFormClick),t},addTask=function(){addWorkItem(this.parentNode,dayOfYear,0)},getNextName=function(e){var t,a;return e===DATATYPE_JOB?t=JOB_STR:e===DATATYPE_CLIENT&&(t=CLIENT_STR),a=0+dataRetrieveObject(t+"Num")+1,dataStoreObject(t+"Num",a),t+a},createClientOrJobFromOb=function(e,t){var a,n,o,r,l,i;t===DATATYPE_CLIENT?(document.getElementById(EL_ID_CLIENTNAMEIN),o=CLIENT_STR):t===DATATYPE_JOB&&(document.getElementById(EL_ID_JOBNAMEIN),o=JOB_STR),a=getNextName(t),e.id=a,e.class=a,(n=dataRetrieveObject(o))[e.id]=e,dataStoreObject(o,n),r="."+a+", ."+a+":hover, ."+a+":active",addCSSRule(r,"color",e.color),addCSSRule(r,"background-color",e.bgcolor),t===DATATYPE_CLIENT?(l="#"+CLIENT_FG_COLPICK,i="#"+CLIENT_BG_COLPICK):t===DATATYPE_JOB&&(l="#"+JOB_FG_COLPICK,i="#"+JOB_BG_COLPICK),addCSSRule(l,"background-color",e.color),addCSSRule(i,"background-color",e.bgcolor)},callMethodFromObOnElement=function(e){logMsg("callMethodFromObOnElement()"),logMsg("\te.target.ob: "+JSON.stringify(e.target.ob)),logMsg("\tthis: "+this),callMethodFromOb(e.target.ob)},callMethodFromOb=function(ob){logMsg("callMethodFromOb(): "+ob.methodName),logMsg("\tob: "+JSON.stringify(ob));var scope;scope=void 0!==ob.scopeID?document.getElementById(ob.scopeID):void 0,logMsg("\tscope: "+scope),eval(ob.methodName).apply(scope,ob.args)},onClientTyped=function(){clientSaveBtn_el.disabled=clientNameInput_el.value.isEmpty()},onJobTyped=function(){jobSaveBtn_el.disabled=jobNameInput_el.value.isEmpty()},drawTimesheets=function(){var e,t,a,n,o,r,l,i,d,c,s=document.getElementById(TIMESHEETCONTAINER_ID),m=document.createDocumentFragment(),p=dataRetrieveObject("day"),E=new Date;switch(dataRetrieveObject("prefs").timespan){case TIMESPAN_WEEK:o=E.getDay(),E.setDate(E.getDate()-o+1),a=DAYSINWEEK;break;case TIMESPAN_MONTH:E.setDate(1),a=E.monthDays();break;case TIMESPAN_YEAR:E.setMonth(0),E.setDate(1),a=DAYSINYEAR,E.isLeapYear()&&(a+=1)}for(n=!1,e=0;e<a;e++)if(dayOfYear=E.getDOY(),r="day row ",!Math.round(daysBetween(E,dateToday))&&(r+="today "),n&&(r+="odd "),n=!n,1===E.getDay()&&(r+="week-start "),1===E.getDate()&&(r+="month-start "),l=createElementWithId("div","day"+dayOfYear),addClassname(l,r),m.appendChild(l),i=document.createElement("span"),addClassname(i,"date"),addClassname(i,"col"),i.innerHTML=E.getWeekDay(1)+"&nbsp;|&nbsp;"+getFormattedDate(E,DATETYPE_DEFAULT.label),E.setDate(E.getDate()+1),l.dayNum=dayOfYear,l.appendChild(i),d=document.createElement("span"),addClassname(d,"day-data"),addClassname(d,"col"),l.appendChild(d),void 0===(c=p[dayOfYear]))addWorkItem(d,dayOfYear,0);else for(t=0;t<c.length;t++)addWorkItem(d,dayOfYear,t);s.appendChild(m)},addWorkItem=function(e,t,a){var n,o="item"+t+"_"+a,r=createElementWithId("span",o);r.setAttribute("dayOfYear",t),r.setAttribute("itemNum",a),e.appendChild(r),n=createInputFromOb({class:"hrs",parent:r,attributes:{type:"number",min:"0",max:"59",step:"15",size:"5"},methodName:"updateInput",scopeID:r.id}),registerEventHandler(n,"change",callMethodFromObOnElement),registerEventHandler(n,"keyup",callMethodFromObOnElement),registerEventHandler(n,"paste",callMethodFromObOnElement),registerEventHandler(n,"input",callMethodFromObOnElement),n=createSelectFromOb({contentType:CONTENTTYPE_CLIENTS,options:dataRetrieveObject(CLIENT_STR),parent:r,methodName:"updateSelected",args:[],scopeID:r.id}),registerEventHandler(n,"change",callMethodFromObOnElement),n=createSelectFromOb({contentType:CONTENTTYPE_JOBS,options:dataRetrieveObject(JOB_STR),parent:r,methodName:"updateSelected",scopeID:r.id}),registerEventHandler(n,"change",callMethodFromObOnElement),n=createInputFromOb({class:"jobNotes",parent:r,attributes:{type:"text"},methodName:"updateInput",scopeID:r.id}),registerEventHandler(n,"change",callMethodFromObOnElement),registerEventHandler(n,"keyup",callMethodFromObOnElement),registerEventHandler(n,"paste",callMethodFromObOnElement),registerEventHandler(n,"input",callMethodFromObOnElement),n=createInputFromOb({class:"money",parent:r,attributes:{type:"number",min:"0",max:"59",step:"15",size:"5"},methodName:"updateInput",scopeID:r.id}),registerEventHandler(n,"change",callMethodFromObOnElement),registerEventHandler(n,"keyup",callMethodFromObOnElement),registerEventHandler(n,"paste",callMethodFromObOnElement),registerEventHandler(n,"input",callMethodFromObOnElement),n=createInputFromOb({class:"moneyNotes",parent:r,attributes:{type:"text"},methodName:"updateInput",scopeID:r.id}),registerEventHandler(n,"change",callMethodFromObOnElement),registerEventHandler(n,"keyup",callMethodFromObOnElement),registerEventHandler(n,"paste",callMethodFromObOnElement),registerEventHandler(n,"input",callMethodFromObOnElement),n=createButtonFromOb({class:"addTaskBtn",label:"+",parent:r,methodName:"addTask",scopeID:r.id}),registerEventHandler(n,"mousedown",callMethodFromObOnElement)},updateRefsToElements=function(){clientNameInput_el=document.getElementById(EL_ID_CLIENTNAMEIN),clientSaveBtn_el=document.getElementById(EL_ID_CLIENTSAVEBTN),colPickClientFG_el=document.getElementById(CLIENT_FG_COLPICK),colPickClientBG_el=document.getElementById(CLIENT_BG_COLPICK),jobNameInput_el=document.getElementById(EL_ID_JOBNAMEIN),jobSaveBtn_el=document.getElementById(EL_ID_JOBSAVEBTN),colPickJobFG_el=document.getElementById(JOB_FG_COLPICK),colPickJobBG_el=document.getElementById(JOB_BG_COLPICK)},onFormClick=function(e){var t=e.target.form;if(t&&t.id)switch(t.id){case"configForm":dataUpdateObject("prefs","timespan",t.timesheetRange.value),dataUpdateObject("prefs","dateFormat",uk.co.firmgently.DDDConsts[t.dateFormat.value]),dataUpdateObject("prefs","totalsToShow",t.totalsToShow.value)}},onFormSubmit=function(e){logMsg("FORM SUBMITTED"),stopPropagation(e)},newClientCreate=function(){var e=getRandomHexColor("dark"),t=getRandomHexColor("light");document.getElementById(EL_ID_CLIENTNAMEIN).value=getNextName(DATATYPE_CLIENT),addCSSRule("#"+CLIENT_FG_COLPICK,"background-color",e),addCSSRule("#"+CLIENT_BG_COLPICK,"background-color",t),addCSSRule("#"+EL_ID_CLIENTNAMEIN,"color",e),addCSSRule("#"+EL_ID_CLIENTNAMEIN,"background-color",t),clientSaveBtn_el.disabled=!1,updateRefsToElements()},newJobCreate=function(){var e=getRandomHexColor("light"),t=getRandomHexColor("dark");document.getElementById(EL_ID_JOBNAMEIN).value=getNextName(DATATYPE_JOB),addCSSRule("#"+JOB_FG_COLPICK,"background-color",e),addCSSRule("#"+JOB_BG_COLPICK,"background-color",t),addCSSRule("#"+EL_ID_JOBNAMEIN,"color",e),addCSSRule("#"+EL_ID_JOBNAMEIN,"background-color",t),jobSaveBtn_el.disabled=!1,updateRefsToElements()},newClientFormSave=function(){createClientOrJobFromOb({name:document.getElementById(EL_ID_CLIENTNAMEIN).value,color:getStyle(colPickClientFG_el,"background-color"),bgcolor:getStyle(colPickClientBG_el,"background-color")},DATATYPE_CLIENT),drawPage()},newJobFormSave=function(){createClientOrJobFromOb({name:document.getElementById(EL_ID_JOBNAMEIN).value,color:getStyle(colPickJobFG_el,"background-color"),bgcolor:getStyle(colPickJobBG_el,"background-color")},DATATYPE_JOB),drawPage()},navClick=function(e){selectPage(arguments[0])},updateSavedWorkItem=function(e){e.getAttribute("dayOfYear"),e.getAttribute("itemNum")},updateSelected=function(e){logMsg("updateSelected()");var t,a,n="#"+this.id,o=this.value,r=dataRetrieveObject("prefs").pagetype,l=(this.parentNode,this.parentNode.parentNode.dayNum);switch(r){case PAGETYPE_TIMESHEETS:case PAGETYPE_JOBSANDCLIENTS:-1!=this.id.toUpperCase().indexOf(CLIENT_STR.toUpperCase())?(addCSSRule(n,"color",dataRetrieveObject(CLIENT_STR)[o].color),addCSSRule(n,"background-color",dataRetrieveObject(CLIENT_STR)[o].bgcolor)):(addCSSRule(n,"color",dataRetrieveObject(JOB_STR)[o].color),addCSSRule(n,"background-color",dataRetrieveObject(JOB_STR)[o].bgcolor));break;case PAGETYPE_CONFIG:}r===PAGETYPE_TIMESHEETS&&(void 0===(a=(t=dataRetrieveObject("day"))[l])&&(a={work:[]}),a.work.push({time:"02:30",client:"test client",job:"test job",jobNotes:"painting the edges",money:-50,moneyNotes:"bought canvas REceipt no.11234"}),t[l]=a,dataStoreObject("day",t))},doSetup()}.call(this);
//# sourceMappingURL=FGDontDillyDally.js.map
