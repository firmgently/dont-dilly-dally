var uk=uk!==undefined?uk:{};uk.co=uk.co!==undefined?uk.co:{};uk.co.firmgently=uk.co.firmgently!==undefined?uk.co.firmgently:{};uk.co.firmgently.FGUtils=function(){"use strict";var addCSSRule,registerEventHandler,unregisterEventHandler,stopPropagation,hexOpacityToRGBA,getRandomHexColor,createElementWithId,removeClassname,addClassname,treatAsUTC,daysBetween,getFormattedDate,logMsg;Storage.prototype.setObject=function(key,value){this.setItem(key,JSON.stringify(value))};Storage.prototype.getObject=function(key){var value=this.getItem(key);return value&&JSON.parse(value)};Date.prototype.monthDays=function(){var d=new Date(this.getFullYear(),this.getMonth()+1,0);return d.getDate()};Date.prototype.isLeapYear=function(){var year=this.getFullYear();if((year&3)!==0){return false}return year%100!==0||year%400===0};stopPropagation=function(e){if(e.preventDefault){e.preventDefault()}if(e.stopPropagation){e.stopPropagation()}e.cancelBubble=true;e.returnValue=false;return false};registerEventHandler=function(node,event,handler,useCapture){useCapture=useCapture===undefined?false:useCapture;if(typeof node.addEventListener==="function"){node.addEventListener(event,handler,useCapture)}else{node.attachEvent("on"+event,handler)}};unregisterEventHandler=function(node,event,handler,useCapture){useCapture=useCapture===undefined?false:useCapture;if(typeof node.removeEventListener==="function"){node.removeEventListener(event,handler,useCapture)}else{node.detachEvent("on"+event,handler)}};hexOpacityToRGBA=function(hexColour,opacity){var r,g,b;r=parseInt(hexColour.substring(0,2),16);g=parseInt(hexColour.substring(2,4),16);b=parseInt(hexColour.substring(4,6),16);return"rgba("+r+", "+g+", "+b+", "+opacity+")"};getRandomHexColor=function(tone){var full=16777215,mid=8388607,third=5592405,smalln=1864135,hexString;if(tone===undefined){hexString="#"+Math.floor(Math.random()*full).toString(16)}else if(tone.toUpperCase()==="LIGHT"){hexString="#"+Math.floor(full-Math.random()*third).toString(16)}else if(tone.toUpperCase()==="DARK"){hexString="#"+Math.floor(Math.random()*smalln).toString(16)}return hexString};createElementWithId=function(elType,id){var el=document.createElement(elType);el.id=id;return el};removeClassname=function(element,name){element.className=element.className.replace(" "+name,"")};addClassname=function(element,name){name=" "+name;element.className=element.className.replace(name,"");element.className=element.className+name};addCSSRule=function(selector,property,newValue){logMsg("selector: "+selector);var i,curStyleSheet,totalStyleSheets=document.styleSheets.length,newStyle=property+": "+newValue;for(i=0;i<totalStyleSheets;i++){curStyleSheet=document.styleSheets[i];logMsg("curStyleSheet: "+curStyleSheet);try{curStyleSheet.insertRule(selector+" {"+newStyle+"}",curStyleSheet.cssRules.length)}catch(err1){try{curStyleSheet.addRule(selector,newStyle)}catch(err2){}}}};getFormattedDate=function(date,format){var dateString;format=format.replace("yy",date.getUTCFullYear());format=format.replace("dd",("0"+date.getUTCDate()).slice(-2));format=format.replace("mm",("0"+(date.getUTCMonth()+1)).slice(-2));return format};logMsg=function(msg){console.log(msg)};treatAsUTC=function(date){var result=new Date(date);result.setMinutes(result.getMinutes()-result.getTimezoneOffset());return result};daysBetween=function(startDate,endDate){var msPerDay=24*60*60*1e3;return(treatAsUTC(endDate)-treatAsUTC(startDate))/msPerDay};return{registerEventHandler:registerEventHandler,unregisterEventHandler:unregisterEventHandler,stopPropagation:stopPropagation,removeClassname:removeClassname,addClassname:addClassname,addCSSRule:addCSSRule,hexOpacityToRGBA:hexOpacityToRGBA,getRandomHexColor:getRandomHexColor,createElementWithId:createElementWithId,getFormattedDate:getFormattedDate,treatAsUTC:treatAsUTC,daysBetween:daysBetween,logMsg:logMsg}}();var uk=uk!==undefined?uk:{};uk.co=uk.co!==undefined?uk.co:{};uk.co.firmgently=uk.co.firmgently!==undefined?uk.co.firmgently:{};uk.co.firmgently.DDDConsts=function(){"use strict";var APP_ID="FGDDD",PAGETYPE_TIMESHEETS=" > timesheets",PAGETYPE_CONFIG=" > settings",PAGETYPE_JOBSANDCLIENTS=" > jobsAndClients",PAGETYPE_DEFAULT=PAGETYPE_TIMESHEETS,BODYID_TIMESHEETS="timesheets",BODYID_CONFIG="config",BODYID_JOBSANDCLIENTS="jobsClients",GUITYPE_COL="GUITypeCol",GUITYPE_ROW="GUITypeRow",GUITYPE_BTN="GUITypeBtn",GUITYPE_COLORPICKER="GUITypeColorPicker",GUITYPE_RADIOBTN="GUITypeRadioBtn",GUITYPE_TEXTINPUT="GUITypeTextInput",GUITYPE_SELECT="GUITypeSelect",GUITYPE_FORM="GUITypeForm",GUITYPE_SECTION="GUITypeSection",GUITYPE_METHODCALL="GUITypeMethodCall",CLASS_BTNNAV="btnNav",CLASS_FORMMAIN="formMain",CLASS_COL="col",CLASS_ROW="row",EL_ID_JOBNAMEIN="jobNameIn",EL_ID_CLIENTNAMEIN="clientNameIn",COLPICK_FG_CLIENT="clientFGPicker",COLPICK_BG_CLIENT="clientBGPicker",COLPICK_FG_JOB="jobFGPicker",COLPICK_BG_JOB="jobBGPicker",DATATYPE_JOB="dataTypeJob",DATATYPE_CLIENT="dataTypeClient",CONTENTTYPE_CLIENTS="contentTypeClients",CONTENTTYPE_JOBS="contentTypeJobs",TIMESHEETCONTAINER_ID="timesheetContainer",GUIDATA_NAVMAIN=[{type:GUITYPE_BTN,class:CLASS_BTNNAV,id:BODYID_TIMESHEETS,label:"Timesheets",method:"navClick",args:[PAGETYPE_TIMESHEETS],scopeID:"main",parentID:"navMain"},{type:GUITYPE_BTN,class:CLASS_BTNNAV,id:BODYID_JOBSANDCLIENTS,label:"Jobs & Clients",method:"navClick",args:[PAGETYPE_JOBSANDCLIENTS],scopeID:"main",parentID:"navMain"},{type:GUITYPE_BTN,class:CLASS_BTNNAV,id:BODYID_CONFIG,label:"Settings",method:"navClick",args:[PAGETYPE_CONFIG],scopeID:"main",parentID:"navMain"}],PAGEDATA_JOBSANDCLIENTS={pageTitle:"Jobs and Clients",intro:"Add, delete or edit jobs and clients."},GUIDATA_JOBSANDCLIENTS=[{type:GUITYPE_COL,id:"editClientCol",class:CLASS_COL,parentID:"main"},{type:GUITYPE_FORM,id:"createClientForm",class:CLASS_FORMMAIN,title:"Fill in client details",method:null,parentID:"editClientCol",el_ar:[{type:GUITYPE_ROW,id:"clientNewRow",class:CLASS_ROW,parentID:"createClientForm"},{type:GUITYPE_ROW,id:"clientsExistingRow",class:CLASS_ROW,parentID:"createClientForm"},{type:GUITYPE_TEXTINPUT,id:EL_ID_CLIENTNAMEIN,label:"Client name",parentID:"clientNewRow",method:"onClientTyped",args:[],scopeID:"createClientForm"},{type:GUITYPE_BTN,label:"Create new",id:"createNewClientBtn",method:"newClientFormSubmit",args:[],scopeID:"createClientForm",parentID:"clientNewRow"},{type:GUITYPE_COLORPICKER,id:COLPICK_FG_CLIENT,class:"color-picker",parentID:"clientsExistingRow"},{type:GUITYPE_COLORPICKER,id:COLPICK_BG_CLIENT,class:"color-picker",parentID:"clientsExistingRow"},{type:GUITYPE_SELECT,label:"Existing clients",args:[],scopeID:"createClientForm",parentID:"clientsExistingRow",id:"selectClient",contentType:CONTENTTYPE_CLIENTS}]},{type:GUITYPE_COL,id:"editJobCol",class:CLASS_COL,parentID:"main"},{type:GUITYPE_FORM,id:"createJobForm",class:CLASS_FORMMAIN,title:"Fill in job details",method:null,parentID:"editJobCol",hidden:false,el_ar:[{type:GUITYPE_ROW,id:"jobNewRow",class:CLASS_ROW,parentID:"createJobForm"},{type:GUITYPE_ROW,id:"jobsExistingRow",class:CLASS_ROW,parentID:"createJobForm"},{type:GUITYPE_TEXTINPUT,id:EL_ID_JOBNAMEIN,label:"Job name",parentID:"jobNewRow"},{type:GUITYPE_BTN,label:"Create new",id:"createNewJobBtn",method:"newJobFormSubmit",scopeID:"createJobForm",args:[],parentID:"jobNewRow"},{type:GUITYPE_COLORPICKER,id:COLPICK_FG_JOB,class:"color-picker",parentID:"jobsExistingRow"},{type:GUITYPE_COLORPICKER,id:COLPICK_BG_JOB,class:"color-picker",parentID:"jobsExistingRow"},{type:GUITYPE_SELECT,label:"Existing jobs",method:"selectJobs",args:[],scopeID:"createJobForm",parentID:"jobsExistingRow",id:"selectJob",contentType:CONTENTTYPE_JOBS}]}],PAGEDATA_TIMESHEETS={pageTitle:"Timesheets",intro:"This is where you keep track of actual work."},GUIDATA_TIMESHEETS=[{type:GUITYPE_SECTION,id:TIMESHEETCONTAINER_ID,parentID:"main"},{type:GUITYPE_METHODCALL,method:"drawTimesheets",scopeID:"main"}],PAGEDATA_CONFIG={pageTitle:"Settings",intro:"Show and hide things and customise settings."},GUIDATA_CONFIG=[{type:GUITYPE_FORM,id:"configForm",class:CLASS_FORMMAIN,title:"Set your preferences here",parentID:"main",hidden:false,el_ar:[{type:GUITYPE_RADIOBTN,id:"timesheetRange",label:"Choose how many days you want to show on the timesheet page",parentID:"configForm",options:{timespanWeek:"A week",timespanMonth:"A month",timespanYear:"A year"},disabled:true}]}],DATETYPE_YYMMDD={label:"yy/mm/dd"},DATETYPE_DDMMYY={label:"dd/mm/yy"},DATETYPE_MMDDYY={label:"mm/dd/yy"},DATETYPE_DEFAULT=DATETYPE_DDMMYY,JOB_DEFAULT_1={name:"Fake Job (for testing)",color:"#000",bgcolor:"#0ff"},JOB_DEFAULT_2={name:"General admin",color:"#0f0",bgcolor:"#123"},CLIENT_DEFAULT_1={name:"Dummy Client (for testing)",color:"#fff",bgcolor:"#f00"},CLIENT_DEFAULT_2={name:"I and I",color:"#435",bgcolor:"#821"},TIMESPAN_WEEK="timespanWeek",TIMESPAN_MONTH="timespanMonth",TIMESPAN_YEAR="timespanYear",TIMESPAN_DEFAULT=TIMESPAN_MONTH,DAYSINWEEK=7,DAYSINMONTH=31,DAYSINYEAR=365,TXT_STORAGE_UNSUPPORTED="Sorry - storage is not supported on this device or browser";return{APP_ID:APP_ID,GUIDATA_NAVMAIN:GUIDATA_NAVMAIN,PAGETYPE_TIMESHEETS:PAGETYPE_TIMESHEETS,PAGETYPE_CONFIG:PAGETYPE_CONFIG,PAGETYPE_JOBSANDCLIENTS:PAGETYPE_JOBSANDCLIENTS,PAGETYPE_DEFAULT:PAGETYPE_DEFAULT,BODYID_TIMESHEETS:BODYID_TIMESHEETS,BODYID_CONFIG:BODYID_CONFIG,BODYID_JOBSANDCLIENTS:BODYID_JOBSANDCLIENTS,GUITYPE_COL:GUITYPE_COL,GUITYPE_ROW:GUITYPE_ROW,GUITYPE_BTN:GUITYPE_BTN,GUITYPE_RADIOBTN:GUITYPE_RADIOBTN,GUITYPE_FORM:GUITYPE_FORM,GUITYPE_SELECT:GUITYPE_SELECT,GUITYPE_TEXTINPUT:GUITYPE_TEXTINPUT,GUITYPE_SECTION:GUITYPE_SECTION,GUITYPE_METHODCALL:GUITYPE_METHODCALL,GUITYPE_COLORPICKER:GUITYPE_COLORPICKER,TIMESHEETCONTAINER_ID:TIMESHEETCONTAINER_ID,PAGEDATA_JOBSANDCLIENTS:PAGEDATA_JOBSANDCLIENTS,GUIDATA_JOBSANDCLIENTS:GUIDATA_JOBSANDCLIENTS,PAGEDATA_TIMESHEETS:PAGEDATA_TIMESHEETS,GUIDATA_TIMESHEETS:GUIDATA_TIMESHEETS,PAGEDATA_CONFIG:PAGEDATA_CONFIG,GUIDATA_CONFIG:GUIDATA_CONFIG,DATETYPE_YYMMDD:DATETYPE_YYMMDD,DATETYPE_DDMMYY:DATETYPE_DDMMYY,DATETYPE_MMDDYY:DATETYPE_MMDDYY,DATETYPE_DEFAULT:DATETYPE_DEFAULT,TIMESPAN_WEEK:TIMESPAN_WEEK,TIMESPAN_MONTH:TIMESPAN_MONTH,TIMESPAN_YEAR:TIMESPAN_YEAR,TIMESPAN_DEFAULT:TIMESPAN_DEFAULT,DAYSINWEEK:DAYSINWEEK,DAYSINMONTH:DAYSINMONTH,DAYSINYEAR:DAYSINYEAR,CLASS_BTNNAV:CLASS_BTNNAV,CLASS_FORMMAIN:CLASS_FORMMAIN,CLASS_COL:CLASS_COL,CLASS_ROW:CLASS_ROW,EL_ID_JOBNAMEIN:EL_ID_JOBNAMEIN,EL_ID_CLIENTNAMEIN:EL_ID_CLIENTNAMEIN,COLPICK_FG_JOB:COLPICK_FG_JOB,COLPICK_BG_JOB:COLPICK_BG_JOB,COLPICK_FG_CLIENT:COLPICK_FG_CLIENT,COLPICK_BG_CLIENT:COLPICK_BG_CLIENT,TXT_STORAGE_UNSUPPORTED:TXT_STORAGE_UNSUPPORTED,JOB_DEFAULT_1:JOB_DEFAULT_1,JOB_DEFAULT_2:JOB_DEFAULT_2,CLIENT_DEFAULT_1:CLIENT_DEFAULT_1,CLIENT_DEFAULT_2:CLIENT_DEFAULT_2,CONTENTTYPE_CLIENTS:CONTENTTYPE_CLIENTS,CONTENTTYPE_JOBS:CONTENTTYPE_JOBS,DATATYPE_JOB:DATATYPE_JOB,DATATYPE_CLIENT:DATATYPE_CLIENT}}();var uk=uk!==undefined?uk:{};uk.co=uk.co!==undefined?uk.co:{};uk.co.firmgently=uk.co.firmgently!==undefined?uk.co.firmgently:{};uk.co.firmgently.DontDillyDally=function(){"use strict";var prop,dateDisplayStart,dateDisplaySelected,dateToday,doSetup,selectPage,drawPage,fillHTMLFromOb,drawGUIFromAr,createButtonFromOb,createFormFromOb,createTextInputFromOb,callMethodFromObOnElement,callMethodFromOb,onFormClick,createSelectFromOb,createRadioFromOb,createBasicElementFromOb,createColorPickerFromOb,drawTimesheets,navClick,onClientTyped,dataStoragePossible,initDataObject,dataStoreObject,dataRetrieveObject,dataUpdateObject,clientAndJobStyleSheet,createClientOrJobFromOb,newClientFormSubmit,newJobFormSubmit,storeCSSRules;for(prop in uk.co.firmgently.DDDConsts){this[prop]=uk.co.firmgently.DDDConsts[prop]}for(prop in uk.co.firmgently.FGUtils){this[prop]=uk.co.firmgently.FGUtils[prop]}dataStoragePossible=function(){if(typeof Storage==="undefined"){logMsg(TXT_STORAGE_UNSUPPORTED)}else{return true}};initDataObject=function(){if(!dataRetrieveObject("prefs")){dataStoreObject("prefs",{pagetype:PAGETYPE_DEFAULT,timespan:TIMESPAN_DEFAULT});dataStoreObject("clientNum",0);dataStoreObject("JobNum",0);dataStoreObject("clients",[]);createClientOrJobFromOb(CLIENT_DEFAULT_1,DATATYPE_CLIENT);createClientOrJobFromOb(CLIENT_DEFAULT_2,DATATYPE_CLIENT);dataStoreObject("jobs",[]);createClientOrJobFromOb(JOB_DEFAULT_1,DATATYPE_JOB);createClientOrJobFromOb(JOB_DEFAULT_2,DATATYPE_JOB);dataStoreObject("timesheets",{});dataStoreObject("clientAndJobStyles","")}};dataStoreObject=function(category,ob){localStorage.setItem(APP_ID+"_"+category,JSON.stringify(ob))};dataRetrieveObject=function(category){return JSON.parse(localStorage.getItem(APP_ID+"_"+category))};dataUpdateObject=function(category,key,value){var prop,ob=dataRetrieveObject(category);for(prop in ob){if(prop===key){ob[prop]=value;break}}dataStoreObject(category,ob)};doSetup=function(){dateDisplayStart=new Date;dateDisplaySelected=new Date;dateToday=new Date;localStorage.clear();if(dataStoragePossible()){initDataObject();clientAndJobStyleSheet=document.createElement("style");clientAndJobStyleSheet.innerHTML=dataRetrieveObject("clientAndJobStyles");document.getElementsByTagName("head")[0].appendChild(clientAndJobStyleSheet);selectPage(dataRetrieveObject("prefs").pagetype);drawGUIFromAr(GUIDATA_NAVMAIN);if(location.hash){selectPage(location.hash.substring(1))}}};selectPage=function(pagetype){dataUpdateObject("prefs","pagetype",pagetype);location.hash=pagetype;drawPage()};drawPage=function(){document.getElementById("main").innerHTML="";switch(dataRetrieveObject("prefs").pagetype){case PAGETYPE_TIMESHEETS:document.body.id=BODYID_TIMESHEETS;fillHTMLFromOb(PAGEDATA_TIMESHEETS);drawGUIFromAr(GUIDATA_TIMESHEETS);break;case PAGETYPE_CONFIG:document.body.id=BODYID_CONFIG;fillHTMLFromOb(PAGEDATA_CONFIG);drawGUIFromAr(GUIDATA_CONFIG);break;case PAGETYPE_JOBSANDCLIENTS:document.body.id=BODYID_JOBSANDCLIENTS;fillHTMLFromOb(PAGEDATA_JOBSANDCLIENTS);drawGUIFromAr(GUIDATA_JOBSANDCLIENTS);break;default:break}};fillHTMLFromOb=function(ob){for(var prop in ob){document.getElementById(prop).innerHTML=ob[prop]}};drawGUIFromAr=function(ar){var i,ob;for(i=0;i<ar.length;i++){ob=ar[i];switch(ob.type){case GUITYPE_BTN:createButtonFromOb(ob);break;case GUITYPE_FORM:createFormFromOb(ob);break;case GUITYPE_TEXTINPUT:createTextInputFromOb(ob);break;case GUITYPE_SELECT:createSelectFromOb(ob);break;case GUITYPE_RADIOBTN:createRadioFromOb(ob);break;case GUITYPE_SECTION:case GUITYPE_COL:case GUITYPE_ROW:createBasicElementFromOb(ob);break;case GUITYPE_COLORPICKER:createColorPickerFromOb(ob);break;case GUITYPE_METHODCALL:callMethodFromOb(ob);break;default:break}}};createButtonFromOb=function(ob){var button_el,parent_el=document.getElementById(ob.parentID);if(ob.id){button_el=createElementWithId("button",ob.id)}else{button_el=document.createElement("button")}parent_el.appendChild(button_el);if(ob.class){addClassname(button_el,ob.class)}button_el.innerHTML=ob.label;button_el.ob=ob;registerEventHandler(button_el,"mousedown",callMethodFromObOnElement);if(ob.disabled){button_el.disabled=ob.disabled}};createTextInputFromOb=function(ob){var input_el,label_el,parent_el=document.getElementById(ob.parentID);if(ob.label){label_el=document.createElement("label");label_el.innerHTML=ob.label;parent_el.appendChild(label_el);label_el.htmlFor=ob.id}if(ob.id){input_el=createElementWithId("input",ob.id);input_el.name=ob.id}else{input_el=document.createElement("input")}input_el.setAttribute("type","text");parent_el.appendChild(input_el);input_el.ob=ob;if(ob.class){addClassname(input_el,ob.class)}if(ob.method!==undefined){registerEventHandler(input_el,"change",callMethodFromObOnElement);registerEventHandler(input_el,"keyup",callMethodFromObOnElement);registerEventHandler(input_el,"paste",callMethodFromObOnElement);registerEventHandler(input_el,"input",callMethodFromObOnElement)}};createSelectFromOb=function(ob){var i,prop,select_el,label_el,option_el,clientOrJob_ob,parent_el=document.getElementById(ob.parentID);if(ob.label){label_el=document.createElement("label");label_el.innerHTML=ob.label;parent_el.appendChild(label_el);label_el.htmlFor=ob.id}if(ob.id){select_el=createElementWithId("select",ob.id);select_el.name=ob.id}else{select_el=document.createElement("select")}select_el.setAttribute("size","1.1");parent_el.appendChild(select_el);if(ob.contentType){if(ob.contentType===CONTENTTYPE_CLIENTS){ob.options=dataRetrieveObject("clients")}else if(ob.contentType===CONTENTTYPE_JOBS){ob.options=dataRetrieveObject("jobs")}for(i=0;i<ob.options.length;i++){clientOrJob_ob=ob.options[i];option_el=select_el.options[select_el.options.length]=new Option(clientOrJob_ob.name,clientOrJob_ob.class);addClassname(option_el,clientOrJob_ob.class)}}else{for(prop in ob.options){select_el.options[select_el.options.length]=new Option(ob.options[prop],prop)}if(ob.class){addClassname(select_el,ob.class)}}registerEventHandler(select_el,"change",ob.method)};createRadioFromOb=function(ob){var prop,radio_el,label_el,parent_el=document.getElementById(ob.parentID);for(prop in ob.options){label_el=document.createElement("label");label_el.innerHTML=ob.options[prop];parent_el.appendChild(label_el);radio_el=document.createElement("input");radio_el.setAttribute("type","radio");parent_el.appendChild(radio_el);radio_el.id=ob.id;radio_el.name=ob.id;radio_el.value=prop;if(prop===dataRetrieveObject("prefs").timespan){radio_el.checked=true}label_el.htmlFor=ob.id;if(ob.class){addClassname(radio_el,ob.class)}}};createBasicElementFromOb=function(ob){var el,elType,parent_el=document.getElementById(ob.parentID);switch(ob.type){case GUITYPE_COL:case GUITYPE_ROW:elType="span";break;case GUITYPE_SECTION:elType="section";break;default:break}if(ob.id){el=createElementWithId(elType,ob.id)}else{el=document.createElement(elType)}parent_el.appendChild(el);if(ob.class){addClassname(el,ob.class)}};createColorPickerFromOb=function(ob){var el,parent_el=document.getElementById(ob.parentID);if(ob.id){el=createElementWithId("span",ob.id)}else{el=document.createElement("span")}parent_el.appendChild(el);if(ob.class){addClassname(el,ob.class)}};createClientOrJobFromOb=function(ob,dataType){var id,ar,n,prefix,selector,pluralName,input_el;if(dataType===DATATYPE_CLIENT){prefix="client";input_el=document.getElementById(EL_ID_CLIENTNAMEIN)}else if(dataType===DATATYPE_JOB){input_el=document.getElementById(EL_ID_JOBNAMEIN);prefix="job"}n=0+dataRetrieveObject(prefix+"Num")+1;dataStoreObject(prefix+"Num",n);id=prefix+n;ob.class=id;pluralName=prefix+"s";ar=dataRetrieveObject(pluralName);ar.push(ob);dataStoreObject(pluralName,ar);selector="."+id+", "+"."+id+":hover, "+"."+id+":active";addCSSRule(selector,"color",ob.color);addCSSRule(selector,"background-color",ob.bgcolor);storeCSSRules(selector,"color",ob.color,"background-color",ob.bgcolor);if(dataType===DATATYPE_CLIENT){addCSSRule("#"+COLPICK_FG_CLIENT,"background-color",ob.color);addCSSRule("#"+COLPICK_BG_CLIENT,"background-color",ob.bgcolor);storeCSSRules("#"+COLPICK_FG_CLIENT,"background-color",ob.color);storeCSSRules("#"+COLPICK_BG_CLIENT,"background-color",ob.bgcolor)}else if(dataType===DATATYPE_JOB){addCSSRule("#"+COLPICK_FG_JOB,"background-color",ob.color);addCSSRule("#"+COLPICK_BG_JOB,"background-color",ob.bgcolor);storeCSSRules("#"+COLPICK_FG_JOB,"background-color",ob.color);storeCSSRules("#"+COLPICK_BG_JOB,"background-color",ob.bgcolor)}};storeCSSRules=function(selector){var i,pairs=(arguments.length-1)/2,rule=selector+" { ";for(i=1;i<pairs*2;i+=2){rule+=arguments[i]+": "+arguments[i+1]+"; "}rule+="} ";dataStoreObject("clientAndJobStyles",dataRetrieveObject("clientAndJobStyles")+rule)};callMethodFromObOnElement=function(e){logMsg("callMethodFromObOnElement: "+JSON.stringify(e.target.ob));callMethodFromOb(e.target.ob)};callMethodFromOb=function(ob){var scope=ob.scopeID!==undefined?document.getElementById(ob.scopeID):undefined;logMsg("\tcallMethodFromOb: "+JSON.stringify(ob));eval(ob.method).apply(scope,ob.args)};newClientFormSubmit=function(){logMsg("this: "+this);logMsg("this.id: "+this.id);createClientOrJobFromOb({name:document.getElementById(EL_ID_CLIENTNAMEIN).value,color:getRandomHexColor("dark"),bgcolor:getRandomHexColor("light")},DATATYPE_CLIENT);drawPage()};newJobFormSubmit=function(){createClientOrJobFromOb({name:document.getElementById(EL_ID_JOBNAMEIN).value,color:getRandomHexColor("light"),bgcolor:getRandomHexColor("dark")},DATATYPE_JOB);drawPage()};onClientTyped=function(){};drawTimesheets=function(){var i,daysToDraw,isOddDay,weekdayCur,isToday,rowClassname,day_el,date_el,holder_el,hrs_el,client_el,job_el,jobnotes_el,ob_temp,weekStartDay=1,parent_el=document.getElementById(TIMESHEETCONTAINER_ID),dayCur=new Date;switch(dataRetrieveObject("prefs").timespan){case TIMESPAN_WEEK:weekdayCur=dayCur.getDay();dayCur.setDate(dayCur.getDate()-weekdayCur+weekStartDay);daysToDraw=DAYSINWEEK;break;case TIMESPAN_MONTH:dayCur.setDate(1);daysToDraw=dayCur.monthDays();break;case TIMESPAN_YEAR:dayCur.setMonth(0);dayCur.setDate(1);daysToDraw=DAYSINYEAR;if(dayCur.isLeapYear()){daysToDraw+=1}break;default:break}isOddDay=false;for(i=0;i<daysToDraw;i++){rowClassname="day row ";isToday=!Math.round(daysBetween(dayCur,dateToday));if(isToday){rowClassname+="today "}if(isOddDay){rowClassname+="odd "}isOddDay=!isOddDay;if(dayCur.getDay()===weekStartDay){rowClassname+="week-start "}if(dayCur.getDate()===1){rowClassname+="month-start "}day_el=createElementWithId("span","day_el"+i);parent_el.appendChild(day_el);addClassname(day_el,rowClassname);date_el=document.createElement("span");addClassname(date_el,"date");addClassname(date_el,"col");day_el.appendChild(date_el);date_el.innerHTML=getFormattedDate(dayCur,DATETYPE_DEFAULT.label);dayCur.setDate(dayCur.getDate()+1);holder_el=createElementWithId("span","holder_el"+i);addClassname(holder_el,"day-data");addClassname(holder_el,"col");day_el.appendChild(holder_el);hrs_el=document.createElement("input");hrs_el.setAttribute("type","number");hrs_el.setAttribute("min","5");hrs_el.setAttribute("max","59");hrs_el.setAttribute("step","1");hrs_el.setAttribute("size","5");holder_el.appendChild(hrs_el);ob_temp=dataRetrieveObject("clients");ob_temp.contentType=CONTENTTYPE_CLIENTS;ob_temp.parentID=holder_el.id;createSelectFromOb(ob_temp);ob_temp=dataRetrieveObject("jobs");ob_temp.contentType=CONTENTTYPE_JOBS;ob_temp.parentID=holder_el.id;createSelectFromOb(ob_temp);jobnotes_el=createTextInputFromOb({class:"jobNotes",parentID:"holder_el"+i})}};createFormFromOb=function(ob){var i,form_el,parent_el=document.getElementById(ob.parentID);if(ob.id){form_el=createElementWithId("form",ob.id)}else{form_el=document.createElement("form")}parent_el.appendChild(form_el);if(ob.class){addClassname(form_el,ob.class)}if(ob.label){form_el.innerHTML=ob.label}if(ob.el_ar){drawGUIFromAr(ob.el_ar)}if(ob.hidden){form_el.style.display="none"}form_el.ob=ob;registerEventHandler(form_el,"click",onFormClick)};onFormClick=function(e){var form=e.target.form;if(form&&form.id){switch(form.id){case"configForm":dataUpdateObject("prefs","timespan",form.timesheetRange.value);break;default:break}}};navClick=function(e){selectPage(arguments[0])};doSetup();return}.call(this);
//# sourceMappingURL=js/FGDontDillyDally.js.map