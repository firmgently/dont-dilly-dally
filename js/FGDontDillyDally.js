var uk=void 0!==uk?uk:{};uk.co=void 0!==uk.co?uk.co:{},uk.co.firmgently=void 0!==uk.co.firmgently?uk.co.firmgently:{},uk.co.firmgently.DDDConsts=function(){"use strict";var e={label:"dd/mm/yy"};return{APP_ID:"FGDDD",GUIDATA_NAVMAIN:[{type:"GUITypeBtn",class:"btnNav",id:"timesheets",label:"Timesheets",methodName:"navClick",args:[" > timesheets"],scopeID:"main",parent:"nav-main"},{type:"GUITypeBtn",class:"btnNav",id:"jobsClients",label:"Jobs & Clients",methodName:"navClick",args:[" > jobsAndClients"],scopeID:"main",parent:"nav-main"},{type:"GUITypeBtn",class:"btnNav",id:"config",label:"Settings",methodName:"navClick",args:[" > settings"],scopeID:"main",parent:"nav-main"},{type:"GUITypeUL",ar:["date","hrs","client","job","job notes","£","£ notes"],ulID:"column-headings",class:"col",parent:"header-main"}],PAGETYPE_TIMESHEETS:" > timesheets",PAGETYPE_CONFIG:" > settings",PAGETYPE_JOBSANDCLIENTS:" > jobsAndClients",PAGETYPE_DEFAULT:" > timesheets",BODYID_TIMESHEETS:"timesheets",BODYID_CONFIG:"config",BODYID_JOBSANDCLIENTS:"jobsClients",GUITYPE_COL:"GUITypeCol",GUITYPE_ROW:"GUITypeRow",GUITYPE_BTN:"GUITypeBtn",GUITYPE_RADIOBTN:"GUITypeRadioBtn",GUITYPE_FORM:"GUITypeForm",GUITYPE_SELECT:"GUITypeSelect",GUITYPE_TEXTINPUT:"GUITypeTextInput",GUITYPE_SECTION:"GUITypeSection",GUITYPE_METHODCALL:"GUITypeMethodCall",GUITYPE_COLORPICKER:"GUITypeColorPicker",GUITYPE_UL:"GUITypeUL",TIMESHEETCONTAINER_ID:"timesheetContainer",PAGEDATA_JOBSANDCLIENTS:{pageTitle:"Jobs and Clients",intro:"Add, delete or edit jobs and clients."},GUIDATA_JOBSANDCLIENTS:[{type:"GUITypeCol",id:"editClientCol",class:"col",parent:"main"},{type:"GUITypeForm",id:"createClientForm",class:"formMain",title:"Fill in client details",parent:"editClientCol",el_ar:[{type:"GUITypeRow",id:"clientNewRow",class:"row",parent:"createClientForm"},{type:"GUITypeRow",id:"clientsExistingRow",class:"row",parent:"createClientForm"},{type:"GUITypeBtn",label:"Create new",id:"createNewClientBtn",methodName:"newClientCreate",args:[],scopeID:"createClientForm",parent:"clientNewRow"},{type:"GUITypeTextInput",id:"clientNameIn",label:"Client name",parent:"clientNewRow",methodName:"onClientTyped",args:[],scopeID:"createClientForm",attributes:{type:"text"}},{type:"GUITypeBtn",label:"Save",id:"saveNewClientBtn",methodName:"newClientFormSave",args:[],scopeID:"createClientForm",parent:"clientNewRow",disabled:!0},{type:"GUITypeColorPicker",id:"clientFGPicker",class:"color-picker",parent:"clientsExistingRow"},{type:"GUITypeColorPicker",id:"clientBGPicker",class:"color-picker",parent:"clientsExistingRow"},{type:"GUITypeSelect",label:"Existing clients",args:[],scopeID:"createClientForm",parent:"clientsExistingRow",methodName:"updateSelected",id:"selectClient",contentType:"contentTypeClients"}]},{type:"GUITypeCol",id:"editJobCol",class:"col",parent:"main"},{type:"GUITypeForm",id:"createJobForm",class:"formMain",title:"Fill in job details",parent:"editJobCol",hidden:!1,el_ar:[{type:"GUITypeRow",id:"jobNewRow",class:"row",parent:"createJobForm"},{type:"GUITypeRow",id:"jobsExistingRow",class:"row",parent:"createJobForm"},{type:"GUITypeBtn",label:"Create new",id:"createNewJobBtn",methodName:"newJobCreate",scopeID:"createJobForm",args:[],parent:"jobNewRow"},{type:"GUITypeTextInput",id:"jobNameIn",label:"Job name",parent:"jobNewRow",attributes:{type:"text"}},{type:"GUITypeBtn",label:"Save",id:"saveNewJobBtn",methodName:"newJobFormSave",scopeID:"createJobForm",args:[],parent:"jobNewRow",disabled:!0},{type:"GUITypeColorPicker",id:"jobFGPicker",class:"color-picker",parent:"jobsExistingRow"},{type:"GUITypeColorPicker",id:"jobBGPicker",class:"color-picker",parent:"jobsExistingRow"},{type:"GUITypeSelect",label:"Existing jobs",args:[],scopeID:"createJobForm",parent:"jobsExistingRow",methodName:"updateSelected",id:"selectJob",contentType:"contentTypeJobs"}]}],PAGEDATA_TIMESHEETS:{pageTitle:"Timesheets",intro:"This is where you keep track of actual work."},GUIDATA_TIMESHEETS:[{type:"GUITypeSection",id:"timesheetContainer",parent:"main"},{type:"GUITypeMethodCall",methodName:"drawTimesheets",scopeID:"main"}],PAGEDATA_CONFIG:{pageTitle:"Settings",intro:"Show and hide things and customise settings."},GUIDATA_CONFIG:[{type:"GUITypeForm",id:"configForm",class:"formMain",title:"Set your preferences here",parent:"main",hidden:!1,el_ar:[{type:"GUITypeRadioBtn",id:"dateFormat",label:"Format used to show dates",parent:"configForm",options:{DATETYPE_DDMMYY:"dd/mm/yy",DATETYPE_MMDDYY:"mm/dd/yy",DATETYPE_YYMMDD:"yy/mm/dd"},disabled:!0},{type:"GUITypeRadioBtn",id:"timesheetRange",label:"Choose how many days you want to show on the timesheet page",parent:"configForm",options:{timespanWeek:"A week",timespanMonth:"A month",timespanYear:"A year"},disabled:!0},{type:"GUITypeRadioBtn",id:"totalsToShow",label:"Choose which totals you want totted up and displayed",parent:"configForm",options:{showTotalsWeek:"Show weekly totals",showTotalsMonth:"Show monthly totals",showTotalsWeekAndMonth:"Show both weekly and monthly totals"},disabled:!0}]}],DATETYPE_YYMMDD:{label:"yy/mm/dd"},DATETYPE_DDMMYY:e,DATETYPE_MMDDYY:{label:"mm/dd/yy"},DATETYPE_DEFAULT:e,TIMESPAN_WEEK:"timespanWeek",TIMESPAN_MONTH:"timespanMonth",TIMESPAN_YEAR:"timespanYear",TIMESPAN_DEFAULT:"timespanMonth",DAYSINWEEK:7,DAYSINMONTH:31,DAYSINYEAR:365,CLASS_BTNNAV:"btnNav",CLASS_FORMMAIN:"formMain",CLASS_COL:"col",CLASS_ROW:"row",EL_ID_COLHEADING:"column-headings",CLIENT_STR:"client",JOB_STR:"job",EL_ID_JOBNAMEIN:"jobNameIn",EL_ID_CLIENTNAMEIN:"clientNameIn",JOB_FG_COLPICK:"jobFGPicker",JOB_BG_COLPICK:"jobBGPicker",CLIENT_FG_COLPICK:"clientFGPicker",CLIENT_BG_COLPICK:"clientBGPicker",TXT_STORAGE_UNSUPPORTED:"Sorry - storage is not supported on this device or browser",JOB_DEFAULT_1:{name:"Purchasing",color:"#000",bgcolor:"#0ff"},JOB_DEFAULT_2:{name:"Administration",color:"#0f0",bgcolor:"#123"},CLIENT_DEFAULT_1:{name:"Will @ ACME CO",color:"#fff",bgcolor:"#f00"},CLIENT_DEFAULT_2:{name:"Diamond Jules",color:"#435",bgcolor:"#821"},CONTENTTYPE_CLIENTS:"contentTypeClients",CONTENTTYPE_JOBS:"contentTypeJobs",DATATYPE_JOB:"dataTypeJob",DATATYPE_CLIENT:"dataTypeClient",EL_ID_CLIENTSAVEBTN:"saveNewClientBtn",EL_ID_JOBSAVEBTN:"saveNewJobBtn",EL_ID_SELECTCLIENT:"selectClient",EL_ID_SELECTJOB:"selectJob",SHOWTOTALS_WEEK:"showTotalsWeek",SHOWTOTALS_MONTH:"showTotalsMonth",SHOWTOTALS_BOTH:"showTotalsWeekAndMonth",SHOWTOTALS_DEFAULT:"showTotalsWeekAndMonth"}}();var uk=void 0!==uk?uk:{};uk.co=void 0!==uk.co?uk.co:{},uk.co.firmgently=void 0!==uk.co.firmgently?uk.co.firmgently:{},uk.co.firmgently.FGUtils=function(){"use strict";var e,t,a,o,n,r,l,i,c,d,s,m,p,T,E,u;return String.prototype.isEmpty=function(){return!this||/^\s*$/.test(this)},Storage.prototype.setObject=function(e,t){this.setItem(e,JSON.stringify(t))},Storage.prototype.getObject=function(e){var t=this.getItem(e);return t&&JSON.parse(t)},Date.prototype.monthDays=function(){return new Date(this.getFullYear(),this.getMonth()+1,0).getDate()},Date.prototype.isLeapYear=function(){var e=this.getFullYear();return 0==(3&e)&&(e%100!=0||e%400==0)},Date.prototype.getDOY=function(){var e=[0,31,59,90,120,151,181,212,243,273,304,334],t=this.getMonth(),a=this.getDate(),o=e[t]+a;return t>1&&this.isLeapYear()&&o++,o},r=function(e){return e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0,e.returnValue=!1,!1},o=function(e,t,a,o){o=void 0!==o&&o,"function"==typeof e.addEventListener?e.addEventListener(t,a,o):e.attachEvent("on"+t,a)},n=function(e,t,a,o){o=void 0!==o&&o,"function"==typeof e.removeEventListener?e.removeEventListener(t,a,o):e.detachEvent("on"+t,a)},l=function(e,t){var a,o,n;return a=parseInt(e.substring(0,2),16),o=parseInt(e.substring(2,4),16),n=parseInt(e.substring(4,6),16),"rgba("+a+", "+o+", "+n+", "+t+")"},i=function(e){var t;return void 0===e?t="#"+Math.floor(16777215*Math.random()).toString(16):"LIGHT"===e.toUpperCase()?t="#"+Math.floor(16777215-5592405*Math.random()).toString(16):"DARK"===e.toUpperCase()&&(t="#"+Math.floor(1864135*Math.random()).toString(16)),t},c=function(e,t){var a=document.createElement(e);return a.id=t,a},d=function(e,t){e.className=e.className.replace(" "+t,"")},s=function(e,t){t=" "+t,e.className=e.className.replace(t,""),e.className=e.className+t},e=function(e,t,a){var o,n,r=document.styleSheets.length,l=t+": "+a;for(o=0;o<r;o++){n=document.styleSheets[o];try{n.insertRule(e+" {"+l+"}",n.cssRules.length)}catch(t){try{n.addRule(e,l)}catch(e){}}}},E=function(e,t){return t=t.replace("yy",e.getUTCFullYear()),t=t.replace("dd",("0"+e.getUTCDate()).slice(-2)),t=t.replace("mm",("0"+(e.getUTCMonth()+1)).slice(-2))},m=function(e,t){var a;return e.currentStyle?a=e.currentStyle[t]:window.getComputedStyle&&(a=document.defaultView.getComputedStyle(e,null).getPropertyValue(t)),a},u=function(e){console.log(e)},t=function(){for(var e=3,t=document.createElement("div"),a=t.getElementsByTagName("i");t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e",a[0];);return e>4?e:void 0},a=function(){return"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0},p=function(e){var t=new Date(e);return t.setMinutes(t.getMinutes()-t.getTimezoneOffset()),t},T=function(e,t){return(p(t)-p(e))/864e5},{registerEventHandler:o,unregisterEventHandler:n,stopPropagation:r,removeClassname:d,addClassname:s,addCSSRule:e,hexOpacityToRGBA:l,getRandomHexColor:i,createElementWithId:c,getFormattedDate:E,treatAsUTC:p,daysBetween:T,logMsg:u,getIEVersion:t,getStyle:m,isTouchDevice:a}}();var uk=void 0!==uk?uk:{};uk.co=void 0!==uk.co?uk.co:{},uk.co.firmgently=void 0!==uk.co.firmgently?uk.co.firmgently:{},uk.co.firmgently.DontDillyDally=function(){"use strict";var prop,dateDisplayStart,dateDisplaySelected,dateToday,clientNameInput_el,jobNameInput_el,clientSaveBtn_el,jobSaveBtn_el,colPickClientFG_el,colPickClientBG_el,colPickJobFG_el,colPickJobBG_el,dayOfYear,doSetup,selectPage,drawPage,fillHTMLFromOb,drawGUIFromAr,createButtonFromOb,createFormFromOb,createInputFromOb,callMethodFromObOnElement,callMethodFromOb,onFormClick,createSelectFromOb,createRadioFromOb,addLIsFromOb,createBasicElementFromOb,createColorPickerFromOb,drawTimesheets,getNextName,newClientCreate,newJobCreate,navClick,onClientTyped,onJobTyped,onFormSubmit,dataStoragePossible,initDataObject,dataStoreObject,dataRetrieveObject,dataUpdateObject,clientAndJobStyleSheet,createClientOrJobFromOb,newClientFormSave,newJobFormSave,clientInputWasLastEmpty,updateRefsToElements,updateSelected,addWorkItem,updateSavedWorkItem;for(prop in uk.co.firmgently.DDDConsts)this[prop]=uk.co.firmgently.DDDConsts[prop];for(prop in uk.co.firmgently.FGUtils)this[prop]=uk.co.firmgently.FGUtils[prop];dataStoragePossible=function(){if("undefined"!=typeof Storage)return!0;logMsg(TXT_STORAGE_UNSUPPORTED)},initDataObject=function(){dataRetrieveObject("prefs")||(dataStoreObject("prefs",{pagetype:PAGETYPE_DEFAULT,timespan:TIMESPAN_DEFAULT,dateFormat:DATETYPE_DEFAULT,totalsToShow:SHOWTOTALS_DEFAULT}),dataStoreObject("clientNum",0),dataStoreObject("jobNum",0),dataStoreObject(CLIENT_STR,{}),createClientOrJobFromOb(CLIENT_DEFAULT_1,DATATYPE_CLIENT),createClientOrJobFromOb(CLIENT_DEFAULT_2,DATATYPE_CLIENT),dataStoreObject(JOB_STR,{}),createClientOrJobFromOb(JOB_DEFAULT_1,DATATYPE_JOB),createClientOrJobFromOb(JOB_DEFAULT_2,DATATYPE_JOB),dataStoreObject("day",{}))},dataStoreObject=function(e,t){localStorage.setItem(APP_ID+"_"+e,JSON.stringify(t))},dataRetrieveObject=function(e){return JSON.parse(localStorage.getItem(APP_ID+"_"+e))},dataUpdateObject=function(e,t,a){var o,n=dataRetrieveObject(e);for(o in n)if(o===t){n[o]=a;break}dataStoreObject(e,n)},doSetup=function(){dateDisplayStart=new Date,dateDisplaySelected=new Date,dateToday=new Date,localStorage.clear(),dataStoragePossible()&&(initDataObject(),selectPage(dataRetrieveObject("prefs").pagetype),drawGUIFromAr(GUIDATA_NAVMAIN),location.hash&&selectPage(location.hash.substring(1)))},selectPage=function(e){dataUpdateObject("prefs","pagetype",e),location.hash=e,drawPage()},drawPage=function(){switch(document.getElementById("main").innerHTML="",dataRetrieveObject("prefs").pagetype){case PAGETYPE_TIMESHEETS:document.body.id=BODYID_TIMESHEETS,fillHTMLFromOb(PAGEDATA_TIMESHEETS),drawGUIFromAr(GUIDATA_TIMESHEETS);break;case PAGETYPE_CONFIG:document.body.id=BODYID_CONFIG,fillHTMLFromOb(PAGEDATA_CONFIG),drawGUIFromAr(GUIDATA_CONFIG);break;case PAGETYPE_JOBSANDCLIENTS:document.body.id=BODYID_JOBSANDCLIENTS,fillHTMLFromOb(PAGEDATA_JOBSANDCLIENTS),drawGUIFromAr(GUIDATA_JOBSANDCLIENTS)}updateRefsToElements()},fillHTMLFromOb=function(e){for(var t in e)document.getElementById(t).innerHTML=e[t]},drawGUIFromAr=function(e){var t,a;for(t=0;t<e.length;t++)switch((a=e[t]).type){case GUITYPE_BTN:createButtonFromOb(a);break;case GUITYPE_FORM:createFormFromOb(a);break;case GUITYPE_TEXTINPUT:createInputFromOb(a);break;case GUITYPE_SELECT:createSelectFromOb(a);break;case GUITYPE_RADIOBTN:createRadioFromOb(a);break;case GUITYPE_UL:addLIsFromOb(a);break;case GUITYPE_SECTION:case GUITYPE_COL:case GUITYPE_ROW:createBasicElementFromOb(a);break;case GUITYPE_COLORPICKER:createColorPickerFromOb(a);break;case GUITYPE_METHODCALL:callMethodFromOb(a)}},getNextName=function(e){var t,a;return e===DATATYPE_JOB?t=JOB_STR:e===DATATYPE_CLIENT&&(t=CLIENT_STR),a=0+dataRetrieveObject(t+"Num")+1,dataStoreObject(t+"Num",a),t+a},createButtonFromOb=function(e){var t,a="string"==typeof e.parent?document.getElementById(e.parent):e.parent;t=e.id?createElementWithId("button",e.id):document.createElement("button"),a.appendChild(t),e.class&&addClassname(t,e.class),t.innerHTML=e.label,t.ob=e,registerEventHandler(t,"mousedown",callMethodFromObOnElement),e.disabled&&(t.disabled=e.disabled)},createInputFromOb=function(e){var t,a,o,n="string"==typeof e.parent?document.getElementById(e.parent):e.parent;if(logMsg("ob.parent: "+e.parent),logMsg("parent_el: "+n),logMsg("typeof ob.parent: "+typeof e.parent),e.id?(e.label&&((o=document.createElement("label")).innerHTML=e.label,n.appendChild(o),o.htmlFor=e.id),(a=createElementWithId("input",e.id)).name=e.id,a.id=e.id):a=document.createElement("input"),e.class&&addClassname(a,e.class),n.appendChild(a),e.attributes)for(t in e.attributes)a.setAttribute(""+t,""+e.attributes[t]);a.ob=e,void 0!==e.methodName&&(registerEventHandler(a,"change",callMethodFromObOnElement),registerEventHandler(a,"keyup",callMethodFromObOnElement),registerEventHandler(a,"paste",callMethodFromObOnElement),registerEventHandler(a,"input",callMethodFromObOnElement))},createSelectFromOb=function(e){var t,a,o,n,r,l="string"==typeof e.parent?document.getElementById(e.parent):e.parent;if(e.id?(e.label&&((o=document.createElement("label")).innerHTML=e.label,l.appendChild(o),o.htmlFor=e.id),(a=createElementWithId("select",e.id)).name=e.id,a.id=e.id):a=document.createElement("select"),e.class&&addClassname(a,e.class),l.appendChild(a),a.setAttribute("size","1"),e.contentType){e.contentType===CONTENTTYPE_CLIENTS?e.options=dataRetrieveObject(CLIENT_STR):e.contentType===CONTENTTYPE_JOBS&&(e.options=dataRetrieveObject(JOB_STR));for(t in e.options)r=e.options[t],n=a.options[a.options.length]=new Option(r.name,r.class),addClassname(n,r.class),addCSSRule("."+r.class,"background-color",r.bgcolor),addCSSRule("."+r.class,"color",r.color)}else for(t in e.options)a.options[a.options.length]=new Option(e.options[t],t);a.ob=e,e.methodName&&registerEventHandler(a,"change",callMethodFromObOnElement)},createRadioFromOb=function(e){var t,a,o,n="string"==typeof e.parent?document.getElementById(e.parent):e.parent;for(t in e.options)(o=document.createElement("label")).innerHTML=e.options[t],n.appendChild(o),a=document.createElement("input"),e.class&&addClassname(a,e.class),n.appendChild(a),a.setAttribute("type","radio"),a.id=e.id,a.name=e.id,a.value=t,t===dataRetrieveObject("prefs").timespan&&(a.checked=!0),o.htmlFor=e.id},addLIsFromOb=function(e){var t,a,o=createElementWithId("ul",EL_ID_COLHEADING),n="string"==typeof e.parent?document.getElementById(e.parent):e.parent;for(addClassname(o,CLASS_ROW),t=0;t<e.ar.length;t++)(a=document.createElement("li")).innerHTML=e.ar[t],o.appendChild(a),e.class&&addClassname(a,e.class);n.appendChild(o)},createBasicElementFromOb=function(e){var t,a,o="string"==typeof e.parent?document.getElementById(e.parent):e.parent;switch(e.type){case GUITYPE_COL:case GUITYPE_ROW:a="span";break;case GUITYPE_SECTION:a="section";break;default:a="div"}t=e.id?createElementWithId(a,e.id):document.createElement(a),o.appendChild(t),e.class&&addClassname(t,e.class)},createColorPickerFromOb=function(e){var t,a="string"==typeof e.parent?document.getElementById(e.parent):e.parent;t=e.id?createElementWithId("span",e.id):document.createElement("span"),a.appendChild(t),e.class&&addClassname(t,e.class)},createClientOrJobFromOb=function(e,t){var a,o,n,r,l,i;t===DATATYPE_CLIENT?(document.getElementById(EL_ID_CLIENTNAMEIN),n=CLIENT_STR):t===DATATYPE_JOB&&(document.getElementById(EL_ID_JOBNAMEIN),n=JOB_STR),a=getNextName(t),e.id=a,e.class=a,(o=dataRetrieveObject(n))[e.id]=e,dataStoreObject(n,o),r="."+a+", ."+a+":hover, ."+a+":active",addCSSRule(r,"color",e.color),addCSSRule(r,"background-color",e.bgcolor),t===DATATYPE_CLIENT?(l="#"+CLIENT_FG_COLPICK,i="#"+CLIENT_BG_COLPICK):t===DATATYPE_JOB&&(l="#"+JOB_FG_COLPICK,i="#"+JOB_BG_COLPICK),addCSSRule(l,"background-color",e.color),addCSSRule(i,"background-color",e.bgcolor)},callMethodFromObOnElement=function(e){logMsg("callMethodFromObOnElement()"),logMsg("\tcallMethodFromObOnElement: "+JSON.stringify(e.target.ob)),callMethodFromOb(e.target.ob)},callMethodFromOb=function(ob){logMsg("\tcallMethodFromOb: "+JSON.stringify(ob));var scope=void 0!==ob.scopeID?document.getElementById(ob.scopeID):void 0;eval(ob.methodName).apply(scope,ob.args)},onClientTyped=function(){clientSaveBtn_el.disabled=clientNameInput_el.value.isEmpty()},onJobTyped=function(){jobSaveBtn_el.disabled=jobNameInput_el.value.isEmpty()},drawTimesheets=function(){var e,t,a,o,n,r,l,i,c,d,s=document.getElementById(TIMESHEETCONTAINER_ID),m=dataRetrieveObject("day"),p=new Date;switch(dataRetrieveObject("prefs").timespan){case TIMESPAN_WEEK:n=p.getDay(),p.setDate(p.getDate()-n+1),a=DAYSINWEEK;break;case TIMESPAN_MONTH:p.setDate(1),a=p.monthDays();break;case TIMESPAN_YEAR:p.setMonth(0),p.setDate(1),a=DAYSINYEAR,p.isLeapYear()&&(a+=1)}for(o=!1,e=0;e<a;e++)if(dayOfYear=p.getDOY(),r="day row ",!Math.round(daysBetween(p,dateToday))&&(r+="today "),o&&(r+="odd "),o=!o,1===p.getDay()&&(r+="week-start "),1===p.getDate()&&(r+="month-start "),l=createElementWithId("div","day"+dayOfYear),s.appendChild(l),addClassname(l,r),i=document.createElement("span"),addClassname(i,"date"),addClassname(i,"col"),l.appendChild(i),i.innerHTML=getFormattedDate(p,DATETYPE_DEFAULT.label),p.setDate(p.getDate()+1),l.dayNum=dayOfYear,c=document.createElement("span"),l.appendChild(c),addClassname(c,"day-data"),addClassname(c,"col"),d=m[dayOfYear],logMsg("allWorkItems: "+m),logMsg("dayWorkItems: "+d),void 0===d)addWorkItem(c,dayOfYear+"_0");else for(t=0;t<d.length;t++)addWorkItem(c,dayOfYear+"_"+t)},addWorkItem=function(e,t,a){var o="item"+t+"_"+a,n=createElementWithId("span",o);n.setAttribute("dayOfYear",t),n.setAttribute("itemNum",a),e.appendChild(n),createInputFromOb({class:"hrs",parent:n,attributes:{type:"number",min:"0",max:"59",step:"15",size:"5"}}),createSelectFromOb({contentType:CONTENTTYPE_CLIENTS,parent:n,methodName:"updateSelected",args:[],scopeID:e.id}),createSelectFromOb({contentType:CONTENTTYPE_JOBS,parent:n,methodName:"updateSelected",scopeID:e.id}),createInputFromOb({class:"jobNotes",parent:n,attributes:{type:"text"}}),createInputFromOb({class:"money",parent:n,attributes:{type:"number",min:"0",max:"59",step:"15",size:"5"}}),createInputFromOb({class:"moneyNotes",parent:n,attributes:{type:"text"}}),createButtonFromOb({id:"addTaskBtn",label:"+",methodName:"addTask",parent:n})},updateRefsToElements=function(){clientNameInput_el=document.getElementById(EL_ID_CLIENTNAMEIN),clientSaveBtn_el=document.getElementById(EL_ID_CLIENTSAVEBTN),colPickClientFG_el=document.getElementById(CLIENT_FG_COLPICK),colPickClientBG_el=document.getElementById(CLIENT_BG_COLPICK),jobNameInput_el=document.getElementById(EL_ID_JOBNAMEIN),jobSaveBtn_el=document.getElementById(EL_ID_JOBSAVEBTN),colPickJobFG_el=document.getElementById(JOB_FG_COLPICK),colPickJobBG_el=document.getElementById(JOB_BG_COLPICK)},createFormFromOb=function(e){var t,a=document.getElementById(e.parent);t=e.id?createElementWithId("form",e.id):document.createElement("form"),a.appendChild(t),e.class&&addClassname(t,e.class),e.title&&(t.innerHTML="<h2>"+e.title+"</h2>"),e.el_ar&&drawGUIFromAr(e.el_ar),e.hidden&&(t.style.display="none"),t.ob=e,registerEventHandler(t,"submit",onFormSubmit),registerEventHandler(t,"click",onFormClick)},onFormClick=function(e){var t=e.target.form;if(t&&t.id)switch(t.id){case"configForm":dataUpdateObject("prefs","timespan",t.timesheetRange.value),dataUpdateObject("prefs","dateFormat",uk.co.firmgently.DDDConsts[t.dateFormat.value]),dataUpdateObject("prefs","totalsToShow",t.totalsToShow.value)}},onFormSubmit=function(e){logMsg("FORM SUBMITTED"),stopPropagation(e)},newClientCreate=function(){var e=getRandomHexColor("dark"),t=getRandomHexColor("light");document.getElementById(EL_ID_CLIENTNAMEIN).value=getNextName(DATATYPE_CLIENT),addCSSRule("#"+CLIENT_FG_COLPICK,"background-color",e),addCSSRule("#"+CLIENT_BG_COLPICK,"background-color",t),addCSSRule("#"+EL_ID_CLIENTNAMEIN,"color",e),addCSSRule("#"+EL_ID_CLIENTNAMEIN,"background-color",t),clientSaveBtn_el.disabled=!1,updateRefsToElements()},newJobCreate=function(){var e=getRandomHexColor("light"),t=getRandomHexColor("dark");document.getElementById(EL_ID_JOBNAMEIN).value=getNextName(DATATYPE_JOB),addCSSRule("#"+JOB_FG_COLPICK,"background-color",e),addCSSRule("#"+JOB_BG_COLPICK,"background-color",t),addCSSRule("#"+EL_ID_JOBNAMEIN,"color",e),addCSSRule("#"+EL_ID_JOBNAMEIN,"background-color",t),jobSaveBtn_el.disabled=!1,updateRefsToElements()},newClientFormSave=function(){createClientOrJobFromOb({name:document.getElementById(EL_ID_CLIENTNAMEIN).value,color:getStyle(colPickClientFG_el,"background-color"),bgcolor:getStyle(colPickClientBG_el,"background-color")},DATATYPE_CLIENT),drawPage()},newJobFormSave=function(){createClientOrJobFromOb({name:document.getElementById(EL_ID_JOBNAMEIN).value,color:getStyle(colPickJobFG_el,"background-color"),bgcolor:getStyle(colPickJobBG_el,"background-color")},DATATYPE_JOB),drawPage()},navClick=function(e){selectPage(arguments[0])},updateSavedWorkItem=function(e){e.getAttribute("dayOfYear"),e.getAttribute("itemNum")},updateSelected=function(e){logMsg("updateSelected()"),logMsg("\te: "+e),logMsg("\tthis: "+this);var t,a,o="#"+e.target.id,n=e.target.value,r=dataRetrieveObject("prefs").pagetype,l=(document.getElementById(e.target.id).parentNode,document.getElementById(e.target.id).parentNode.parentNode.dayNum);switch(r){case PAGETYPE_TIMESHEETS:case PAGETYPE_JOBSANDCLIENTS:-1!=e.target.id.toUpperCase().indexOf(CLIENT_STR.toUpperCase())?(addCSSRule(o,"color",dataRetrieveObject(CLIENT_STR)[n].color),addCSSRule(o,"background-color",dataRetrieveObject(CLIENT_STR)[n].bgcolor)):(addCSSRule(o,"color",dataRetrieveObject(JOB_STR)[n].color),addCSSRule(o,"background-color",dataRetrieveObject(JOB_STR)[n].bgcolor));break;case PAGETYPE_CONFIG:}r===PAGETYPE_TIMESHEETS&&(void 0===(a=(t=dataRetrieveObject("day"))[l])&&(a={work:[]}),a.work.push({time:"02:30",client:"test client",job:"test job",jobNotes:"painting the edges",money:-50,moneyNotes:"bought canvas REceipt no.11234"}),t[l]=a,dataStoreObject("day",t))},doSetup()}.call(this);
//# sourceMappingURL=FGDontDillyDally.js.map
